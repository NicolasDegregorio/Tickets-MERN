(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{540:function(e,t,a){},656:function(e,t){},758:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),i=a(21),s=a.n(i),o=(a(540),a(15)),l=a(130),u=a(13),d=a(817),j=a(406),b=a(788),m=a(404),p=a(405),O=a(490),x=a(786),h=a(122),f=a(316),v=a(787),g=a(497),k=a.n(g),y=a(96),C=a(403),w=a(30),S=a(14),_=a.n(S),N=a(25),I=a(27),T=a.n(I),E=a(342),M={activo:!1},D="GET_LOGIN_SUCCESS",A="CERRAR_SESSION";var F=function(){return function(e){e({type:A}),localStorage.removeItem("usuario")}},L=a(52);function P(){return Object(n.jsxs)(y.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(n.jsx)(x.a,{color:"inherit",href:"https://material-ui.com/",children:"Sigef - Gestion de Incidencias"})," ",(new Date).getFullYear(),"."]})}var R=Object(C.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(".concat("https://sigeftickets.herokuapp.com/","img/sigef-logo.png)"),backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"contain",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),B=Object(L.h)((function(e){var t=R(),a=Object(w.c)(),r=Object(w.d)((function(e){return e.usuario.activo})),i=c.a.useState({email:"",password:""}),s=Object(u.a)(i,2),l=s[0],x=s[1];c.a.useEffect((function(){r&&e.history.push("/tickets")}),[e.history,r]);return Object(n.jsxs)(v.a,{container:!0,component:"main",className:t.root,children:[Object(n.jsx)(b.a,{}),Object(n.jsx)(v.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),Object(n.jsx)(v.a,{item:!0,xs:12,sm:8,md:5,component:h.a,elevation:6,square:!0,children:Object(n.jsxs)("div",{className:t.paper,children:[Object(n.jsx)(d.a,{className:t.avatar,children:Object(n.jsx)(k.a,{})}),Object(n.jsx)(y.a,{component:"h1",variant:"h5",children:"Iniciar Sesion"}),Object(n.jsxs)("form",{className:t.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),a(function(e){return function(){var t=Object(N.a)(_.a.mark((function t(a,n){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.a.post("users",e);case 3:r=t.sent,a({type:D,payload:{token:r.data.token,usuario:Object(E.a)(r.data.token),role:r.data.role.role}}),localStorage.setItem("usuario",JSON.stringify({token:r.data.token})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.response.data),alert(t.t0.response.data.mensaje);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}()}(l))},children:[Object(n.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Correo Electronico",name:"email",autoComplete:"email",onChange:function(e){return x(Object(o.a)(Object(o.a)({},l),{},{email:e.target.value}))},autoFocus:!0}),Object(n.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Contrase\xf1a",type:"password",id:"password",onChange:function(e){return x(Object(o.a)(Object(o.a)({},l),{},{password:e.target.value}))},autoComplete:"current-password"}),Object(n.jsx)(p.a,{control:Object(n.jsx)(O.a,{value:"remember",color:"primary"}),label:"Recordar"}),Object(n.jsx)(j.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Iniciar Sesion"}),Object(n.jsx)(v.a,{container:!0}),Object(n.jsx)(f.a,{mt:5,children:Object(n.jsx)(P,{})})]})]})})]})})),Y=a(48),q=a(799),z=a(3),U=a(790),V=a(408),W=a(335),G=a(499),H=a.n(G),K=a(262),Z=a(407);function X(){var e=c.a.useState(null),t=Object(u.a)(e,2),a=t[0],r=t[1],i=Object(w.d)((function(e){return e.usuario.usuario.data.nombre})),s=Object(w.c)();return Object(n.jsxs)("div",{children:[Object(n.jsx)(j.a,{color:"inherit","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){r(e.currentTarget)},children:i}),Object(n.jsx)(K.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{horizontal:"center"},open:Boolean(a),onClose:function(){r(null)},children:Object(n.jsx)(Z.a,{onClick:function(){return s(F())},children:"Cerrar Sesion"})})]})}var J=Object(C.a)((function(e){return{toolbar:{paddingRight:24},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1}}})),Q=function(e){var t=e.handleDrawerOpen,a=e.open,r=e.mobile,c=J();return Object(n.jsx)("div",{children:Object(n.jsx)(U.a,{position:"absolute",className:Object(z.a)(c.appBar,a&&c.appBarShift),children:Object(n.jsxs)(V.a,{className:c.toolbar,children:[!r&&Object(n.jsx)(W.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:t,className:Object(z.a)(c.menuButton,a&&c.menuButtonHidden),children:Object(n.jsx)(H.a,{})}),Object(n.jsx)(y.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:c.title,children:e.section}),!r&&Object(n.jsx)(W.a,{color:"inherit",children:Object(n.jsx)(X,{})})]})})})},$=a(97),ee=a(793),te=a(519),ae=a(503),ne=a.n(ae),re=a(520),ce=a(791),ie=a(339),se=a(792),oe=a(180),le=a.n(oe),ue=a(501),de=a.n(ue),je=a(275),be=a.n(je),me=a(502),pe=a.n(me),Oe=a(276),xe=a.n(Oe),he=a(500),fe=a.n(he),ve=a(78),ge=Object(n.jsxs)("div",{children:[Object(n.jsxs)(re.a,{button:!0,component:ve.b,to:"/tickets",activeClassName:"Mui-selected",children:[Object(n.jsx)(ce.a,{children:Object(n.jsx)(le.a,{})}),Object(n.jsx)(ie.a,{primary:"Tickets"})]}),Object(n.jsxs)(re.a,{button:!0,component:ve.b,to:"/reportes",activeClassName:"Mui-selected",children:[Object(n.jsx)(ce.a,{children:Object(n.jsx)(be.a,{})}),Object(n.jsx)(ie.a,{primary:"Reporte"})]}),Object(n.jsxs)(re.a,{button:!0,component:ve.b,to:"/calendar",activeClassName:"Mui-selected",children:[Object(n.jsx)(ce.a,{children:Object(n.jsx)(xe.a,{})}),Object(n.jsx)(ie.a,{primary:"Calendario"})]})]}),ke=Object(n.jsxs)("div",{children:[Object(n.jsx)(se.a,{inset:!0,children:"Administracion"}),Object(n.jsxs)(re.a,{button:!0,component:ve.b,to:"/admin/pendientes",activeClassName:"Mui-selected",children:[Object(n.jsx)(ce.a,{children:Object(n.jsx)(fe.a,{})}),Object(n.jsx)(ie.a,{primary:"Tickets Pendiente"})]}),Object(n.jsxs)(re.a,{button:!0,component:ve.b,to:"/admin/users",activeClassName:"Mui-selected",children:[Object(n.jsx)(ce.a,{children:Object(n.jsx)(de.a,{})}),Object(n.jsx)(ie.a,{primary:"Usuarios"})]}),Object(n.jsxs)(re.a,{button:!0,component:ve.b,to:"/admin/instituciones",activeClassName:"Mui-selected",children:[Object(n.jsx)(ce.a,{children:Object(n.jsx)(pe.a,{})}),Object(n.jsx)(ie.a,{primary:"Instituciones"})]})]}),ye=Object(C.a)((function(e){return{toolbarIcon:Object(o.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),drawer:{flexShrink:0,whiteSpace:"nowrap"},drawerPaper:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(Y.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(1)+1},e.breakpoints.up("sm"),{width:e.spacing(3)+1})}})),Ce=function(e){var t,a=e.handleDrawerClose,r=e.open,c=ye(),i=Object(w.d)((function(e){return e.usuario.role}));return Object(n.jsx)("div",{children:Object(n.jsxs)($.a,{variant:"persistent",className:Object(z.a)(c.drawer,(t={},Object(Y.a)(t,c.drawerPaper,r),Object(Y.a)(t,c.drawerPaperClose,!r),t)),classes:{paper:Object(z.a)(c.drawerPaper,!r&&c.drawerPaperClose)},open:r,children:[Object(n.jsx)("div",{className:c.toolbarIcon,children:Object(n.jsx)(W.a,{onClick:a,children:Object(n.jsx)(ne.a,{})})}),Object(n.jsx)(ee.a,{}),Object(n.jsx)(te.a,{children:ge}),Object(n.jsx)(ee.a,{}),"Admin"===i&&Object(n.jsx)(te.a,{children:ke})]})})},we=a(794),Se=a(795),_e=a(409),Ne=a(796),Ie=a(504),Te=a.n(Ie),Ee=a(768),Me=a(31),De=Object(C.a)((function(e){return{dialogWrapper:Object(Y.a)({padding:e.spacing(4),position:"absolute",top:e.spacing(2)},e.breakpoints.down("sm"),{padding:e.spacing(2),position:"absolute",top:e.spacing(0)}),dialogTitle:{paddingRight:"0px"}}}));function Ae(e){var t=e.title,a=e.children,r=e.openPopup,c=e.closeForm,i=e.loading,s=De(),o=Object(Me.a)(),l=Object(Ee.a)(o.breakpoints.down("sm"));return Object(n.jsxs)(we.a,{fullScreen:l,open:r,maxWidth:"sm",classes:{paper:s.dialogWrapper},children:[Object(n.jsx)(Se.a,{className:s.dialogTitle,children:Object(n.jsxs)("div",{style:{display:"flex"},children:[Object(n.jsx)(y.a,{variant:"h6",component:"div",style:{flexGrow:1},children:t}),i&&Object(n.jsx)(_e.a,{}),Object(n.jsx)(W.a,{"aria-label":"delete",onClick:function(){return c()},children:Object(n.jsx)(Te.a,{})})]})}),Object(n.jsx)(Ne.a,{dividers:!0,align:"center",children:a})]})}var Fe=a(797),Le=a(798),Pe=a(506),Re=a.n(Pe),Be=a(505),Ye=a.n(Be),qe=Object(C.a)({root:{width:500,marginTop:"4px"},stickToBottom:{width:"100%",position:"fixed",bottom:0,backgroundColor:"#F2F3F4","& .MuiBottomNavigationAction-root":{"@media (max-width: 768px)":{minWidth:"auto",padding:"6px 0"}}}});function ze(){var e=qe(),t=Object(w.c)(),a=Object(w.d)((function(e){return e.usuario.role})),i=Object(r.useState)(!1),s=Object(u.a)(i,2),o=s[0],l=s[1],d=window.location.pathname,j=c.a.useState(d),b=Object(u.a)(j,2),m=b[0],p=b[1];return Object(n.jsxs)("div",{children:[Object(n.jsxs)(Fe.a,{className:e.stickToBottom,value:m,onChange:function(e,t){p(t)},showLabels:!0,children:[Object(n.jsx)(Le.a,{label:"Tickets",value:"/tickets",icon:Object(n.jsx)(le.a,{}),component:ve.b,to:"/tickets"}),Object(n.jsx)(Le.a,{label:"Reportes",value:"/reportes",icon:Object(n.jsx)(be.a,{}),component:ve.b,to:"/reportes"}),Object(n.jsx)(Le.a,{label:"Calendario",value:"/calendar",icon:Object(n.jsx)(xe.a,{}),component:ve.b,to:"/calendar"}),"Admin"===a&&Object(n.jsx)(Le.a,{label:"Admin",icon:Object(n.jsx)(Ye.a,{}),onClick:function(){return l(!0)}}),Object(n.jsx)(Le.a,{label:"Cerrar Sesion",icon:Object(n.jsx)(Re.a,{}),onClick:function(){return t(F())}})]}),Object(n.jsx)(Ae,{title:"Menu Administrador",openPopup:o,closeForm:function(){l(!1)},children:Object(n.jsx)(te.a,{children:ke})})]})}function Ue(){return Object(n.jsxs)(y.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(n.jsx)(x.a,{color:"inherit",href:"#",children:"Sigef - Gestion de Incidencias"})," ",(new Date).getFullYear(),"."]})}var Ve=Object(C.a)((function(e){var t;return{root:{display:"flex",minHeight:"100vh"},appBarSpacer:e.mixins.toolbar,content:(t={flexGrow:1},Object(Y.a)(t,e.breakpoints.down("sm"),{height:"110vh"}),Object(Y.a)(t,"height","100vh"),Object(Y.a)(t,"overflow","auto"),Object(Y.a)(t,"paddingBottom","50px"),t),container:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},footer:{position:"absolute",bottom:0,left:0,right:0,width:"100%",backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[800]}}}));function We(e){var t=e.children,a=Ve(),r=Object(Me.a)(),i=!window.matchMedia("(max-width: 700px)").matches,s=Object(Ee.a)(r.breakpoints.down("sm")),o=c.a.useState(i),l=Object(u.a)(o,2),d=l[0],j=l[1];return Object(n.jsxs)("div",{className:a.root,children:[Object(n.jsx)(b.a,{}),Object(n.jsx)(Q,{handleDrawerOpen:function(){j(!0)},open:d,mobile:s,section:e.section}),!s&&Object(n.jsx)(Ce,{handleDrawerClose:function(){j(!1)},open:d}),Object(n.jsxs)("main",{className:a.content,children:[Object(n.jsx)("div",{className:a.appBarSpacer}),Object(n.jsx)(q.a,{maxWidth:"lg",className:a.container,children:Object(n.jsx)(v.a,{container:!0,spacing:3,children:Object(n.jsx)(v.a,{item:!0,xs:12,children:t})})}),Object(n.jsx)("footer",{className:a.footer,children:s?Object(n.jsx)(ze,{}):Object(n.jsx)(Ue,{})})]})]})}var Ge=a(39),He=a(143),Ke=a.n(He),Ze=a(421),Xe=a(521),Je=a(493),Qe=a(71),$e=a.n(Qe),et=a(168),tt=a.n(et),at=a(332),nt=a(334),rt=a(333),ct=a(340),it=a(50),st=a(816),ot=Object(C.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}},formControl:{margin:e.spacing(1),minWidth:"25ch"}}})),lt=function(e){var t=e.ticket,a=e.addTicket,r=e.editTicket,c=e.edit,i=e.institutions,s=e.users,l=e.emptyFields,u=ot(),d=Object(it.b)(),b=d.register,p=d.errors,O=d.handleSubmit,x=d.control;return Object(n.jsx)("div",{children:Object(n.jsxs)("form",{onSubmit:O(c?r:a),className:u.root,children:[Object(n.jsxs)(v.a,{container:!0,children:[Object(n.jsxs)(v.a,{item:!0,xs:12,sm:6,children:[c?Object(n.jsxs)(at.a,{variant:"outlined",children:[Object(n.jsx)(it.a,{as:function(e){var a=e.onChange;return Object(n.jsx)(st.a,{className:"form-item",options:i,onChange:function(e,t){return a(t)},getOptionLabel:function(e){return e.name},defaultValue:{name:t.institution||null},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(n.jsx)(m.a,Object(o.a)(Object(o.a)({},e),{},{label:"Institucion",InputLabelProps:{shrink:!0},variant:"outlined",error:!!p.ticketInstitution}))}})},name:"ticketInstitution",control:x}),Object(n.jsxs)(nt.a,{error:!!p.ticketInstitution,children:[p.ticketInstitution?p.ticketInstitution.message:null," "]})]}):Object(n.jsxs)(at.a,{variant:"outlined",children:[Object(n.jsx)(it.a,{as:function(e){var a=e.onChange;return Object(n.jsx)(st.a,{className:"form-item",options:i,onChange:function(e,t){return a(t)},getOptionLabel:function(e){return e.name},defaultValue:{name:t.institution||null},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){return Object(n.jsx)(m.a,Object(o.a)(Object(o.a)({},e),{},{label:"Institucion",InputLabelProps:{shrink:!0},variant:"outlined",error:!!p.ticketInstitution}))}})},name:"ticketInstitution",control:x,rules:{required:{value:!0,message:"Campo requerido"}}}),Object(n.jsxs)(nt.a,{error:!!p.ticketInstitution,children:[p.ticketInstitution?p.ticketInstitution.message:null," "]})]}),Object(n.jsx)(it.a,{rules:{required:{value:!0,message:"Campo requerido"},minLength:{value:6,message:"M\xednimo 6 car\xe1cteres"}},name:"ticketDescription",id:"ticketDescription",label:"Descripcion",control:x,multiline:!0,rowsMax:4,variant:"outlined",defaultValue:t.description||"",as:Object(n.jsx)(m.a,{error:!!p.ticketDescription,helperText:p.ticketDescription?p.ticketDescription.message:null})}),Object(n.jsxs)(at.a,{variant:"outlined",className:u.formControl,children:[Object(n.jsx)(rt.a,{id:"demo-simple-select-outlined-label",children:"Encargado"}),Object(n.jsx)(it.a,{name:"ticketLeader",control:x,rules:{required:{value:!0,message:"Campo requerido"}},defaultValue:t.team._user||"",as:Object(n.jsx)(ct.a,{labelId:"demo-simple-select-outlined-label",id:"ticketLeader",value:t.team._user,error:!!p.ticketLeader,label:"Encargado",children:s.map((function(e,t){return Object(n.jsx)(Z.a,{value:e._id,children:e.nombre},t)}))})}),Object(n.jsxs)(nt.a,{error:!!p.ticketLeader,children:[p.ticketLeader?p.ticketLeader.message:null," "]})]})]}),Object(n.jsxs)(v.a,{item:!0,xs:12,sm:6,children:[Object(n.jsx)(m.a,{inputRef:b({required:{value:!0,message:"Campo requerido"}}),name:"start_date",id:"start_date",label:"Fecha de Inicio",type:"date",InputLabelProps:{shrink:!0},defaultValue:t.start_date.slice(0,10),error:!!p.start_date,helperText:p.start_date?p.start_date.message:null}),Object(n.jsx)(f.a,{mt:2,children:Object(n.jsx)(m.a,{inputRef:b({required:{value:!0,message:"Campo requerido"}}),name:"end_date",id:"end_date",label:"Fecha Limite",type:"date",InputLabelProps:{shrink:!0},defaultValue:t.end_date.slice(0,10),error:!!p.start_date,helperText:p.end_date?p.end_date.message:null})}),Object(n.jsx)(f.a,{children:Object(n.jsxs)(at.a,{variant:"outlined",className:u.formControl,children:[Object(n.jsx)(rt.a,{id:"labelPrioridad",children:"Prioridad"}),Object(n.jsx)(it.a,{name:"ticketPriority",control:x,rules:{required:{value:!0,message:"Campo requerido"}},defaultValue:t.priority||"",as:Object(n.jsxs)(ct.a,{labelId:"demo-simple-select-outlined-label",label:"Prioridad",id:"ticketPriority",value:t.priority,error:!!p.ticketPriority,children:[Object(n.jsx)(Z.a,{value:"Alta",children:"Alta"}),Object(n.jsx)(Z.a,{value:"Media",children:"Media"}),Object(n.jsx)(Z.a,{value:"Baja",children:"Baja"})]})}),Object(n.jsx)(nt.a,{error:!!p.ticketPriority,children:p.ticketPriority?p.ticketPriority.message:null})]})})]})]}),Object(n.jsx)(v.a,{item:!0,sm:12,children:Object(n.jsxs)(f.a,{display:"flex",justifyContent:"flex-end",m:1,p:1,children:[Object(n.jsx)(j.a,{color:"primary",type:"button",onClick:function(){return l()},children:"Cancelar"}),Object(n.jsx)(j.a,{color:"primary",type:"submit",children:"Guardar"})]})})]})})},ut=a(805),dt=a(806),jt=a(808),bt=Object(C.a)((function(){return{root:{height:"100%"},avatar:function(e){return{backgroundColor:e.color,height:56,width:56}}}}));function mt(e){var t=bt(e),a=e.typeTickets,r=e.totalsTickets,i=e.action,s=e.typeFilter;return Object(n.jsx)(c.a.Fragment,{children:Object(n.jsx)(ut.a,{className:t.root,onClick:function(){return i(s)},children:Object(n.jsx)(dt.a,{children:Object(n.jsx)(jt.a,{children:Object(n.jsxs)(v.a,{container:!0,justify:"space-between",children:[Object(n.jsxs)(v.a,{item:!0,children:[Object(n.jsx)(y.a,{color:"textSecondary",gutterBottom:!0,variant:"subtitle2",children:a}),Object(n.jsx)(y.a,{color:"textPrimary",variant:"h3",children:r})]}),Object(n.jsx)(v.a,{item:!0,children:Object(n.jsx)(d.a,{className:t.avatar,children:Object(n.jsx)(le.a,{})})})]})})})})})}var pt=a(812),Ot=a(815),xt=function(e){var t=e.message,a=e.open,c=e.severity,i=e.setNotification,s=function(e,t){"clickaway"!==t&&i({open:!1})},l=function(e){return Object(n.jsx)(Ot.a,Object(o.a)({elevation:6,variant:"filled"},e))};return Object(n.jsx)(r.Fragment,{children:Object(n.jsx)(pt.a,{open:a,autoHideDuration:5e3,onClose:s,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:Object(n.jsx)(l,{onClose:s,severity:c,children:t})})})},ht=a(807),ft=a(26),vt=a.n(ft),gt=a(182),kt=a.n(gt),yt=Object(C.a)({card:{wirdth:"100%",minWidth:275},media:{height:300},cardAction:{justifyContent:"center"}});function Ct(e){var t=e.ticketsFilterMobile,a=e.edition,r=e.deleteTicket,c=e.roleUser,i=yt();i.bullet;return Object(n.jsx)("div",{children:Object(n.jsx)(f.a,{children:Object(n.jsx)(v.a,{container:!0,spacing:3,children:t.map((function(e){return Object(n.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(n.jsxs)(ut.a,{className:i.card,children:[Object(n.jsxs)(jt.a,{children:[Object(n.jsx)(f.a,{display:"flex",justifyContent:"flex-end",children:Object(n.jsx)(Je.a,{color:"Solucionado"===e.status?"primary":"secondary",size:"small",label:e.status})}),Object(n.jsxs)(y.a,{color:"primary",variant:"h6",children:[e.institution.name," "," "]}),Object(n.jsxs)(y.a,{color:"textSecondary",variant:"subtitle2",children:["Descripcion: ",e.description]}),Object(n.jsxs)(y.a,{color:"textSecondary",variant:"subtitle2",children:["Encargado: ",e.team[0]._user.nombre]}),Object(n.jsxs)(y.a,{color:"textSecondary",variant:"subtitle2",children:["Feche de inicio: ",vt()(e.start_date,"YYYY-MM-DD").format("DD-MM-YYYY")]}),Object(n.jsxs)(y.a,{color:"textSecondary",variant:"subtitle2",children:["Vencimiento: ",vt()(e.end_date,"YYYY-MM-DD").format("DD-MM-YYYY")]}),Object(n.jsxs)(y.a,{color:"textSecondary",variant:"subtitle2",children:["Prioridad: ",e.priority]})]}),Object(n.jsx)(ee.a,{}),Object(n.jsxs)(ht.a,{className:i.cardAction,children:[Object(n.jsx)(j.a,{size:"small",href:"/tickets/".concat(e._id),children:Object(n.jsx)(tt.a,{})}),"Admin"===c&&Object(n.jsxs)("div",{children:[Object(n.jsx)(j.a,{size:"small",onClick:function(){return a(e)},children:Object(n.jsx)(kt.a,{})}),Object(n.jsx)(j.a,{size:"small",onClick:function(){return r(e._id)},children:Object(n.jsx)($e.a,{})})]})]})]})},e._id)}))})})})}var wt=a(183),St=a.n(wt),_t=a(813),Nt=Object(C.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),It=function(e){var t=Object(Me.a)(),a=Nt(),r=Object(w.d)((function(e){return e.usuario.usuario.data._id})),i=Object(w.d)((function(e){return e.usuario.usuario.data.role})),s=Object(Ee.a)(t.breakpoints.down("sm")),l=c.a.useState([]),d=Object(u.a)(l,2),b=d[0],p=d[1],O=c.a.useState([]),x=Object(u.a)(O,2),h=x[0],g=x[1],k=c.a.useState([]),y=Object(u.a)(k,2),C=y[0],S=y[1],I=c.a.useState(!1),E=Object(u.a)(I,2),M=E[0],D=E[1],A=c.a.useState(""),F=Object(u.a)(A,2),L=F[0],P=F[1],R=c.a.useState([]),B=Object(u.a)(R,2),Y=B[0],q=B[1],z=c.a.useState([]),U=Object(u.a)(z,2),V=U[0],W=U[1],G=c.a.useState(!1),H=Object(u.a)(G,2),K=H[0],Z=H[1],X=c.a.useState({open:!1,message:""}),J=Object(u.a)(X,2),Q=J[0],$=J[1],ee=c.a.useState({institution:"",description:"",team:{_user:"",nombre:"",role:""},start_date:"",end_date:"",priority:"",status:"Sin Solucionar"}),te=Object(u.a)(ee,2),ae=te[0],ne=te[1],re=c.a.useState(!1),ce=Object(u.a)(re,2),ie=ce[0],se=ce[1],oe=c.a.useState(!1),le=Object(u.a)(oe,2),ue=(le[0],le[1],c.a.useState(null)),de=Object(u.a)(ue,2),je=de[0],be=de[1],me=c.a.useState(null),pe=Object(u.a)(me,2),Oe=pe[0],xe=pe[1];c.a.useEffect((function(){var e=function(){var e=Object(N.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return se(!0),e.prev=1,e.next=4,T.a.get("api/ticket?usuarioId=".concat(r));case 4:t=e.sent,a=t.data,g(a),q(a.data),W(a.data.slice(0,10)),be(Math.ceil(a.data.length/10)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("ocurrio un error"),console.log(e.t0);case 16:se(!1);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(N.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.get("users/users");case 3:t=e.sent,a=t.data,p(a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("ocurrio un error"),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(N.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.get("institutions/institutions");case 3:t=e.sent,a=t.data,S(a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("ocurrio un error"),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e(),t(),a(),setInterval((function(){e(),t(),a()}),3e5)}),[]);var he=function(){var e=Object(N.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ne(Object(o.a)(Object(o.a)({},ae),{},{institution:t.ticketInstitution,description:t.ticketDescription,team:Object(o.a)(Object(o.a)({},ae.team),{},{_user:t.ticketLeader,role:"Leader"}),start_date:t.start_date,end_date:t.end_date,priority:t.ticketPriority}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return se(!0),a={institution:t.ticketInstitution._id,description:t.ticketDescription,team:{_user:t.ticketLeader,role:"Leader"},start_date:t.start_date,end_date:t.end_date,priority:t.ticketPriority,status:"Sin Solucionar"},e.prev=2,e.next=5,T.a.post("api/nuevo-ticket",a);case 5:n=e.sent,q([].concat(Object(Ge.a)(Y),[n.data])),s&&W([].concat(Object(Ge.a)(V),[n.data])),$(Object(o.a)(Object(o.a)({},Q),{},{open:!0,message:"Ticket Creado Correctamente"})),we(),g(Object(o.a)(Object(o.a)({},h),{},{ticketsAll:h.ticketsAll+1})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:se(!1);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n,r,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],s?a.push(t):t.map((function(e){return a.push(e._id)})),n=a.length,r=window.confirm("Estas Seguro de Eliminar El/Los Registro/s"),e.prev=4,!r){e.next=13;break}return e.next=8,T.a.post("api/ticket/delete/many",a);case 8:c=Y.filter((function(e){return!a.includes(e._id)})),q(c),s&&W(null===Oe?c.slice(0,10):c.slice(10*Oe-10,10*Oe)),$(Object(o.a)(Object(o.a)({},Q),{},{open:!0,message:"Ticket/s Eliminado/s Correctamente"})),g(Object(o.a)(Object(o.a)({},h),{},{ticketsAll:h.ticketsAll-n}));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}(),ge=function(e){P(e._id),ne(Object(o.a)(Object(o.a)({},ae),{},{institution:e.institution.name,description:e.description,team:{_user:e.team[0]._user._id,nombre:e.team[0]._user.nombre,role:"Leader"},start_date:e.start_date,end_date:e.end_date,priority:e.priority,status:e.status})),D(!0),Z(!0)},ke=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return se(!0),a=Object(o.a)(Object(o.a)({},void 0!==t.ticketInstitution&&{institution:t.ticketInstitution._id}),{},{description:t.ticketDescription,team:{_user:t.ticketLeader,role:"Leader"},start_date:t.start_date,end_date:t.end_date,priority:t.ticketPriority,status:t.status}),e.prev=2,e.next=5,T.a.put("api/ticket/".concat(L),a);case 5:n=e.sent,r=Y.map((function(e){return e._id===L?n.data:e})),q(r),s&&W(null===Oe?r.slice(0,10):r.slice(10*Oe-10,10*Oe)),$(Object(o.a)(Object(o.a)({},Q),{},{open:!0,message:"Ticket Editado Correctamente"})),we(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:se(!1);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),ye=function(e){if("Todos"===e)s?W(h.data):q(h.data);else if("Solucionado"===e){var t=h.data.filter((function(e){return"Solucionado"===e.status}));s?W(t):q(t)}else if("Sin Solucionar"===e){var a=h.data.filter((function(e){return"Sin Solucionar"===e.status}));s?W(a):q(a)}else if("Vencidos"===e){var n=h.data.filter((function(e){return!1===e.active&&"Sin Solucionar"===e.status}));s?W(n):q(n)}},Ce=function(){Z(!1),D(!1)},we=function(){Ce(),ne({institution:"",description:"",team:{_user:"",nombre:"",role:"Leader"},start_date:"",end_date:"",priority:"",status:"Sin Solucionar"}),P("")};return Object(n.jsxs)("div",{style:{maxWidth:"100%"},children:[Object(n.jsxs)(v.a,{container:!0,children:[Object(n.jsx)(xt,{message:Q.message,open:Q.open,severity:"success",setNotification:$}),Object(n.jsx)(v.a,{item:!0,md:3,xs:12,children:Object(n.jsx)(f.a,{children:Object(n.jsx)(mt,{typeTickets:"Tickets Totales",totalsTickets:h.ticketsAll,color:"#2196f3",action:ye,typeFilter:"Todos"})})}),Object(n.jsx)(v.a,{item:!0,md:3,xs:12,children:Object(n.jsx)(f.a,{ml:{md:3},mt:{xs:2,sm:2,md:0,lg:0},children:Object(n.jsx)(mt,{typeTickets:"Tickets Solucionados",totalsTickets:h.ticketsSolved,color:"#4caf50",action:ye,typeFilter:"Solucionado"})})}),Object(n.jsx)(v.a,{item:!0,md:3,xs:12,children:Object(n.jsx)(f.a,{ml:{md:3},mt:{xs:2,sm:2,md:0,lg:0},children:Object(n.jsx)(mt,{typeTickets:"Tickets Sin Solucionar",totalsTickets:h.ticketsUnsolved,color:"#ffff70",action:ye,typeFilter:"Sin Solucionar"})})}),Object(n.jsx)(v.a,{item:!0,md:3,xs:12,children:Object(n.jsx)(f.a,{ml:{md:3},mt:{xs:2,sm:2,md:0,lg:0},children:Object(n.jsx)(mt,{typeTickets:"Tickets Vencidos",totalsTickets:h.ticketsExpired,color:"#ff1744",action:ye,typeFilter:"Vencidos"})})})]}),Object(n.jsx)(f.a,{mt:2,children:"Admin"===i&&Object(n.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){return Z(!0)},children:"Nuevo Ticket"})}),s&&Object(n.jsx)(f.a,{mt:2,display:"flex",justifyContent:"center",children:Object(n.jsx)(m.a,{id:"input-with-icon-textfield",label:"Buscar por Institucion",onChange:function(e){return function(e){if(""===e)W(Oe>1?Y.slice(10*Oe-10,10*Oe):Y.slice(0,10));else{var t=e.toLowerCase(),a=Y.filter((function(e){return-1!==e.institution.name.toLowerCase().indexOf(t)}));console.log(t),W(a)}}(e.target.value)},InputProps:{startAdornment:Object(n.jsx)(Ze.a,{position:"start",children:Object(n.jsx)(St.a,{})})}})}),Object(n.jsxs)(f.a,{mt:2,children:[Object(n.jsx)(Xe.a,{className:a.backdrop,open:ie,onClick:!ie,children:Object(n.jsx)(_e.a,{color:"inherit"})}),s?Object(n.jsx)(Ct,{ticketsFilterMobile:V,roleUser:i,edition:ge,deleteTicket:ve}):Object(n.jsx)(Ke.a,{columns:[{title:"Id",field:"_id",hidden:!0},{title:"Institucion",field:"institution[name]"},{title:"Descripcion",field:"description"},{title:"Prioridad",field:"priority",lookup:{Alta:"Alta",Media:"Media",Baja:"Baja"}},{title:"Encargado",field:"team[0][_user][nombre]"},{title:"Fecha de Inicio",field:"start_date",type:"date",dateSetting:{locale:"es-AR"}},{title:"Vencimiento",field:"end_date",type:"date",dateSetting:{locale:"es-AR"}},{title:"Estado",field:"status",lookup:{Solucionado:"Solucionado","Sin Solucionar":"Sin Solucionar"},render:function(e){return Object(n.jsx)(Je.a,{color:"Solucionado"===e.status?"primary":"secondary",size:"small",label:e.status})}}],data:Y,actions:[{icon:function(){return Object(n.jsx)(tt.a,{})},tooltip:"Ver",position:"row",onClick:function(t,a){return e.history.push("/tickets/"+a._id)}},{hidden:"Admin"!==i,icon:"edit",tooltip:"Editar",position:"row",onClick:function(e,t){return ge(t)}},{hidden:"Admin"!==i,icon:function(){return Object(n.jsx)($e.a,{})},position:"toolbarOnSelect",tooltip:"Borrar",onClick:function(e,t){return ve(t)}}],options:{actionsColumnIndex:-1,selection:!0,pageSize:10,filtering:!0,exportButton:!0},title:"Tickets"})]}),s&&Object(n.jsx)(f.a,{ml:-2,mt:2,display:"flex",justifyContent:"center",children:Object(n.jsx)(_t.a,{count:je,color:"primary",onChange:function(e,t){return function(e){se(!0),xe(e),W(Y.slice(10*e-10,10*e)),se(!1)}(t)}})}),Object(n.jsx)(Ae,{title:M?"Editar Ticket":"Agregar Ticket",openPopup:K,closeForm:Ce,loading:ie,children:Object(n.jsx)(lt,{setTicket:ne,ticket:ae,users:b,institutions:C,addTicket:fe,handleInputChange:he,editTicket:ke,edit:M,setOpenPopup:Z,emptyFields:we})})]})},Tt=function(e){return Object(n.jsx)("div",{children:Object(n.jsx)(We,{section:"Tickets",children:Object(n.jsx)(It,{history:e.history})})})},Et=a(814),Mt=a(804),Dt=a(410),At=a(811),Ft=Object(C.a)({table:{minWidth:650},chatSection:{width:"100%",height:"auto"},headBG:{backgroundColor:"#e0e0e0"},borderRight500:{borderRight:"1px solid #e0e0e0"},messageArea:{height:"70vh",overflowY:"auto"}}),Lt=function(e){var t=e.ticket,a=e.userId,r=e.comments,i=Ft(),s=Object(w.d)((function(e){return e.usuario.usuario.data._id})),l=c.a.useState({open:!1,message:"",severity:""}),b=Object(u.a)(l,2),p=b[0],O=b[1],x=c.a.useState(r),h=Object(u.a)(x,2),g=h[0],k=h[1];c.a.useEffect((function(){console.log(g)}),[g]);var y=c.a.useState({ticketId:t._id,userId:a,comment:""}),C=Object(u.a)(y,2),S=C[0],I=C[1],E=function(){var e=Object(N.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.post("api/ticket/comment",S);case 3:t=e.sent,k(t.data.comments),I(Object(o.a)(Object(o.a)({},S),{},{comment:""})),O(Object(o.a)(Object(o.a)({},p),{},{open:!0,message:"Mensaje Enviado Correctamente",severity:"success"})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(N.a)(_.a.mark((function e(a){var n,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,e.prev=1,e.next=4,T.a.delete("api/ticket/comment/deleteComment?ticketId=".concat(n,"&commentId=").concat(a));case 4:r=g.filter((function(e){return e._id!==a})),k(r),O(Object(o.a)(Object(o.a)({},p),{},{open:!0,message:"Mensaje Eliminado Correctamente",severity:"error"})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{children:Object(n.jsxs)(v.a,{container:!0,className:i.chatSection,children:[Object(n.jsx)(xt,{message:p.message,open:p.open,severity:p.severity,setNotification:O}),Object(n.jsxs)(v.a,{item:!0,xs:12,className:i.borderRight500,children:[Object(n.jsx)(v.a,{item:!0,xs:12,children:Object(n.jsx)(m.a,{id:"outlined-basic-email",label:"Mensaje",variant:"outlined",value:S.comment,onKeyPress:function(e){"Enter"===e.key&&E()},onChange:function(e){return I(Object(o.a)(Object(o.a)({},S),{},{comment:e.target.value}))},fullWidth:!0})}),Object(n.jsx)(f.a,{ml:1,mt:2,children:Object(n.jsx)(j.a,{variant:"contained",color:"primary",className:i.button,endIcon:Object(n.jsx)(Dt.a,{children:"send"}),onClick:function(){return E()},children:"Enviar"})}),g.map((function(e){return Object(n.jsxs)(f.a,{mt:2,children:[Object(n.jsx)(ee.a,{}),Object(n.jsx)(te.a,{children:Object(n.jsxs)(re.a,{button:!0,children:[Object(n.jsx)(ce.a,{children:Object(n.jsx)(d.a,{alt:"Remy Sharp",src:"".concat("https://sigeftickets.herokuapp.com/","/img/avatar.jpg")})}),Object(n.jsx)(ie.a,{primary:e._user.nombre,secondary:e.comment}),s===e._user._id?Object(n.jsx)(At.a,{children:Object(n.jsx)(W.a,{edge:"start","aria-label":"delete",onClick:function(){return M(e._id)},children:Object(n.jsx)($e.a,{})})}):""]},e._user.nombre)}),Object(n.jsx)(ee.a,{})]})}))]})]})})},Pt=a(508),Rt=a.n(Pt),Bt=a(131),Yt=Object(Bt.GoogleApiWrapper)({apiKey:"AIzaSyDAwZoCkxg0z2pKbKsjZhBM_NX0S8H44vg",language:"es-ES"})((function(e){var t=e.lat,a=e.lng;return Object(n.jsx)(r.Fragment,{children:Object(n.jsx)(Bt.Map,{google:e.google,zoom:16,initialCenter:{lat:t,lng:a},center:{lat:t,lng:a},children:Object(n.jsx)(Bt.Marker,{position:{lat:t,lng:a}})})})})),qt=a(802),zt=Object(C.a)((function(e){return{root:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper},container:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),width:"100%"}}})),Ut=function(e){var t,a=e.notification,r=e.setNotification,c=e.ticket,i=e.setTicket,s=e.open,l=e.setOpen,u=zt(),d=Object(Me.a)(),b=Object(Ee.a)(d.breakpoints.down("sm")),p=Object(it.b)(),O=p.errors,x=p.handleSubmit,h=p.control,f=function(){var e=Object(N.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={ticketId:c._id,solution:t.ticketSolution},e.prev=1,e.next=4,T.a.post("api/ticket/solution/change",n);case 4:v(),r(Object(o.a)(Object(o.a)({},a),{},{open:!0,message:"Situacion del Ticket Informada",severity:"success"})),i(Object(o.a)(Object(o.a)({},c),{},{solution:n.solution})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){l(!1)};return Object(n.jsx)("div",{children:Object(n.jsxs)(we.a,{fullScreen:b,disableBackdropClick:!0,disableEscapeKeyDown:!0,open:s,onClose:v,children:[Object(n.jsx)(Se.a,{children:"Finalizar Ticket"}),Object(n.jsx)(Ne.a,{children:Object(n.jsx)("form",(t={onSubmit:x(f),className:u.root},Object(Y.a)(t,"className",u.container),Object(Y.a)(t,"children",Object(n.jsx)(at.a,{className:u.formControl,children:Object(n.jsx)(it.a,{rules:{required:{value:!0,message:"Campo requerido"},minLength:{value:6,message:"M\xednimo 6 car\xe1cteres"}},control:h,name:"ticketSolution",id:"ticketSolution",label:"Que se Hizo",variant:"outlined",defaultValue:"",as:Object(n.jsx)(m.a,{error:!!O.ticketSolution,helperText:O.ticketSolution?O.ticketSolution.message:null})})})),t))}),Object(n.jsxs)(qt.a,{children:[Object(n.jsx)(j.a,{onClick:v,color:"primary",children:"Cancelar"}),Object(n.jsx)(j.a,{onClick:x(f),color:"primary",children:"Ok"})]})]})})},Vt=function(e){var t=e.institution,a=e.institutionAddress,r=e.usuarioId,i=e.notification,s=e.setNotification,o=e.responsible,l=e.ticket,d=e.setTicket,b=c.a.useState(!1),m=Object(u.a)(b,2),p=m[0],O=m[1],x=function(){O(!0)};return Object(n.jsx)("div",{children:Object(n.jsxs)(v.a,{container:!0,children:[Object(n.jsx)(f.a,{children:Object(n.jsx)(Ut,{open:p,setOpen:O,notification:i,setNotification:s,ticket:l,setTicket:d,usuarioId:r})}),Object(n.jsx)(v.a,{item:!0,xs:12,children:Object(n.jsxs)(f.a,{display:"flex",justifyContent:"flex-end",children:[o.map((function(e){return"Leader"===e.role&&e._user._id===r&&""===l.solution?Object(n.jsx)(j.a,{onClick:x,children:"Cambiar Estado Ticket"}):""})),""!==l.solution&&"Sin Solucionar"===l.status&&Object(n.jsx)(Je.a,{label:"Ticket Pendiente de Autorizacion",variant:"outlined",color:"primary"}),"Solucionado"===l.status&&Object(n.jsx)(Je.a,{label:"Ticket Resuelto",variant:"outlined",icon:Object(n.jsx)(Rt.a,{}),color:"default",style:{backgroundColor:"#8bc34a"}})]})}),Object(n.jsx)(v.a,{item:!0,xs:12,md:6,children:Object(n.jsxs)(f.a,{children:[Object(n.jsx)(y.a,{variant:"h6",gutterBottom:!0,children:"Institucion"}),Object(n.jsx)(y.a,{variant:"body2",gutterBottom:!0,children:t.name}),Object(n.jsx)(y.a,{variant:"h6",gutterBottom:!0,children:"Descripcion"}),Object(n.jsx)(y.a,{variant:"body2",gutterBottom:!0,children:l.description})]})}),Object(n.jsx)(v.a,{item:!0,xs:12,md:6,children:Object(n.jsxs)(f.a,{children:[Object(n.jsx)(y.a,{variant:"h6",gutterBottom:!0,children:"Direccion:"}),Object(n.jsx)(y.a,{variant:"body2",gutterBottom:!0,children:a.name}),Object(n.jsx)(y.a,{variant:"h6",gutterBottom:!0,children:"Fechas"}),Object(n.jsxs)(y.a,{variant:"body2",gutterBottom:!0,children:["Fecha Inicio: ",vt()(l.start_date,"YYYY-MM-DD").format("DD-MM-YYYY")]}),Object(n.jsxs)(y.a,{variant:"body2",gutterBottom:!0,children:["Fecha Vencimiento: ",vt()(l.end_date,"YYYY-MM-DD").format("DD-MM-YYYY")]})]})}),Object(n.jsx)(v.a,{item:!0,xs:12,style:{position:"relative",height:"40vh"},children:Object(n.jsx)(Yt,{lat:a.lat,lng:a.lng})})]})})},Wt=a(810),Gt=a(345),Ht=a.n(Gt),Kt=Object(C.a)((function(e){return{root:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper},container:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),width:"100%"}}})),Zt=function(e){var t=e.notification,a=e.setNotification,r=e.ticket,c=e.open,i=e.setOpen,s=e.userTeam,l=e.team,u=e.setTeam,d=e.setResponsible,b=Kt(),p=Object(Me.a)(),O=Object(Ee.a)(p.breakpoints.down("sm")),x=function(){var e=Object(N.a)(_.a.mark((function e(){var n,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={ticketId:r._id,members:l},e.prev=1,e.next=4,T.a.post("api/ticket/team/addMembersTeam",n);case 4:c=e.sent,h(),d(c.data.team),a(Object(o.a)(Object(o.a)({},t),{},{open:!0,message:"Miembro/s Agregados Correctamente",severity:"success"})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),h=function(){i(!1)};return Object(n.jsx)("div",{children:Object(n.jsxs)(we.a,{fullScreen:O,disableBackdropClick:!0,disableEscapeKeyDown:!0,open:c,onClose:h,children:[Object(n.jsx)(Se.a,{children:"Agregar Integrantes"}),Object(n.jsx)(Ne.a,{children:Object(n.jsx)("form",{className:b.container,children:Object(n.jsx)(at.a,{className:b.formControl,children:Object(n.jsx)(st.a,{multiple:!0,id:"tags-standard",options:s,getOptionLabel:function(e){return e.nombre},onChange:function(e,t){u(t)},renderInput:function(e){return Object(n.jsx)(m.a,Object(o.a)(Object(o.a)({},e),{},{variant:"standard",label:"Integrantes",placeholder:"Usuarios"}))}})})})}),Object(n.jsxs)(qt.a,{children:[Object(n.jsx)(j.a,{onClick:h,color:"primary",children:"Cancelar"}),Object(n.jsx)(j.a,{onClick:x,color:"primary",children:"Ok"})]})]})})},Xt=function(e){var t=e.team,a=e.setTeam,i=e.setResponsible,s=e.usuarioId,l=e.notification,b=e.setNotification,m=e.responsible,p=e.ticket,O=e.userTeam,x=c.a.useState(!1),h=Object(u.a)(x,2),g=h[0],k=h[1],C=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p._id,e.prev=1,e.next=4,T.a.delete("api/ticket/team/deleteMembersTeam?ticketId=".concat(a,"&userId=").concat(t));case 4:n=e.sent,i(n.data.team),b(Object(o.a)(Object(o.a)({},l),{},{open:!0,message:"Miembro Eliminado Correctamente",severity:"error"})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){k(!0)};return Object(n.jsxs)("div",{children:[Object(n.jsxs)(v.a,{container:!0,children:[Object(n.jsx)(Zt,{open:g,setOpen:k,notification:l,setNotification:b,ticket:p,setResponsible:i,team:t,setTeam:a,userTeam:O}),Object(n.jsx)(v.a,{xs:12,children:Object(n.jsx)(f.a,{display:"flex",justifyContent:"flex-end",children:m.map((function(e){return"Leader"===e.role&&e._user._id===s&&""===p.solution?Object(n.jsx)(j.a,{onClick:w,children:"Agregar al Equipo"}):""}))})})]}),Object(n.jsxs)(v.a,{container:!0,spacing:-2,children:[Object(n.jsx)(v.a,{md:6,children:Object(n.jsxs)(f.a,{children:[Object(n.jsx)(y.a,{variant:"h6",gutterBottom:!0,children:"Encargado:"}),Object(n.jsx)(te.a,{dense:!0,children:m.map((function(e){return"Leader"===e.role?Object(n.jsx)(r.Fragment,{children:Object(n.jsxs)(re.a,{children:[Object(n.jsx)(Wt.a,{children:Object(n.jsx)(d.a,{children:Object(n.jsx)(Ht.a,{})})}),Object(n.jsx)(ie.a,{primary:e._user.nombre,secondary:null})]})}):""}))})]})}),Object(n.jsx)(v.a,{md:6,children:Object(n.jsxs)(f.a,{children:[Object(n.jsx)(y.a,{variant:"h6",gutterBottom:!0,children:"Equipo de Soporte:"}),Object(n.jsx)(te.a,{dense:!0,children:m.map((function(e){return"Support"===e.role?Object(n.jsx)(r.Fragment,{children:Object(n.jsxs)(re.a,{children:[Object(n.jsx)(Wt.a,{children:Object(n.jsx)(d.a,{children:Object(n.jsx)(Ht.a,{})})}),Object(n.jsx)(ie.a,{primary:e._user.nombre,secondary:null}),p.team[0]._user._id===s&&Object(n.jsx)(At.a,{children:Object(n.jsx)(W.a,{edge:"start","aria-label":"delete",onClick:function(){return C(e._user._id)},children:Object(n.jsx)($e.a,{})})})]})}):""}))})]})})]})]})};function Jt(e){var t=e.children,a=e.value,r=e.index,c=Object(l.a)(e,["children","value","index"]);return Object(n.jsx)("div",Object(o.a)(Object(o.a)({role:"tabpanel",hidden:a!==r,id:"scrollable-auto-tabpanel-".concat(r),"aria-labelledby":"scrollable-auto-tab-".concat(r)},c),{},{children:a===r&&Object(n.jsx)(f.a,{p:3,children:Object(n.jsx)(y.a,{children:t})})}))}function Qt(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}}var $t=Object(C.a)((function(e){return{root:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper},container:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),minWidth:400}}}));function ea(e){var t=e.ticket,a=e.setTicket,r=e.responsible,i=e.setResponsible,s=e.usuarioId,l=e.comments,d=e.users,j=e.institution,b=e.institutionAddress,m=$t(),p=c.a.useState({open:!1,message:"",severity:""}),O=Object(u.a)(p,2),x=O[0],h=O[1],f=c.a.useState(0),v=Object(u.a)(f,2),g=v[0],k=v[1],y=c.a.useState([]),C=Object(u.a)(y,2),w=C[0],S=C[1],_=c.a.useState([]),N=Object(u.a)(_,2),I=N[0],T=N[1];c.a.useEffect((function(){!function(){var e=[];r.map((function(t){return e.push(t._user._id)}));var t=d.filter((function(t){return!e.includes(t._id)}));T(t)}()}),[r]);return Object(n.jsxs)("div",{className:m.root,children:[Object(n.jsx)(xt,{message:x.message,open:x.open,severity:x.severity,setNotification:h}),Object(n.jsx)(U.a,{position:"static",color:"default",children:Object(n.jsxs)(Et.a,{value:g,onChange:function(e,t){k(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth",scrollButtons:"auto","aria-label":"scrollable auto tabs example",children:[Object(n.jsx)(Mt.a,Object(o.a)({label:"Detalles"},Qt(0))),Object(n.jsx)(Mt.a,Object(o.a)({label:"Equipo"},Qt(1))),Object(n.jsx)(Mt.a,Object(o.a)({label:"Mensajes"},Qt(2)))]})}),Object(n.jsx)(Jt,{value:g,index:0,children:Object(n.jsx)(Vt,{institutionAddress:b,institution:j,responsible:r,usuarioId:s,ticket:t,setTicket:a,notification:x,setNotification:h})}),Object(n.jsx)(Jt,{value:g,index:1,children:Object(n.jsx)(Xt,{userTeam:I,team:w,setTeam:S,responsible:r,setResponsible:i,usuarioId:s,ticket:t,setTicket:a,notification:x,setNotification:h})}),Object(n.jsx)(Jt,{value:g,index:2,children:Object(n.jsx)(Lt,{ticket:t,userId:s,comments:l})})]})}var ta=function(){var e=Object(w.d)((function(e){return e.usuario.usuario.data._id})),t=c.a.useState([]),a=Object(u.a)(t,2),r=a[0],i=a[1],s=c.a.useState({}),o=Object(u.a)(s,2),l=o[0],d=o[1],j=c.a.useState([]),b=Object(u.a)(j,2),m=b[0],p=b[1],O=c.a.useState([]),x=Object(u.a)(O,2),h=x[0],f=x[1],v=c.a.useState([]),g=Object(u.a)(v,2),k=g[0],y=g[1],C=c.a.useState([]),S=Object(u.a)(C,2),I=S[0],E=S[1],M=Object(L.g)().id,D=c.a.useState(M),A=Object(u.a)(D,2),F=A[0];A[1];return c.a.useEffect((function(){var e=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.get("api/ticket/".concat(t));case 3:a=e.sent,n=a.data,d(n),p(n.team),E(n.comments),f(n.institution),y(n.institution.address),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=Object(N.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.get("users/users");case 3:t=e.sent,a=t.data,i(a),console.log(r),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("ocurrio un error"),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e(F),t()}),[]),Object(n.jsx)(c.a.Fragment,{children:Object(n.jsx)(ea,{ticket:l,setTicket:d,responsible:m,setResponsible:p,usuarioId:e,comments:I,users:r,institution:h,institutionAddress:k})})},aa=function(){return Object(n.jsx)("div",{children:Object(n.jsx)(We,{section:"Detalles del Ticket",children:Object(n.jsx)(ta,{})})})},na=a(515),ra=a(346),ca=a(509),ia=a(510),sa=a.n(ia),oa=function(){var e=Object(w.d)((function(e){return e.usuario.usuario.data._id})),t=Object(r.useState)([]),a=Object(u.a)(t,2),i=a[0],s=a[1],o=Object(r.useState)([]),l=Object(u.a)(o,2),d=l[0],j=l[1],b=window.matchMedia("(max-width: 700px)").matches?{center:"",right:"prev,next"}:{center:"dayGridWeek dayGridMonth listWeek"};return c.a.useEffect((function(){(function(){var t=Object(N.a)(_.a.mark((function t(){var a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.a.get("api/ticket?usuarioId=".concat(e));case 3:a=t.sent,s(a.data.data),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ocurrio un error"),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[]),c.a.useEffect((function(){i.map((function(e){return"Sin Solucionar"===e.status&&j((function(t){return[].concat(Object(Ge.a)(t),[{title:e.institution.name,start:e.start_date,end:e.end_date,url:"/tickets/".concat(e._id),backgroundColor:e.active?"#165CFF":"#FF2416",borderColor:!1===e.active&&"#FF2416"}])}))}))}),[i]),Object(n.jsx)(r.Fragment,{children:Object(n.jsx)(na.a,{plugins:[ra.a,ca.a,ra.a],headerToolbar:b,initialView:"dayGridMonth",height:"auto",locale:sa.a,events:d,showNonCurrentDates:!1})})},la=function(){return Object(n.jsx)(We,{section:"Calendario de Tareas",children:Object(n.jsx)(oa,{})})},ua=a(809),da=Object(C.a)({root:{maxWidth:345},media:{height:140}}),ja=function(){var e=da(),t=c.a.useState({open:!1,message:"",severity:""}),a=Object(u.a)(t,2),r=a[0],i=a[1],s=c.a.useState([]),l=Object(u.a)(s,2),d=l[0],b=l[1];c.a.useEffect((function(){(function(){var e=Object(N.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.get("api/ticket/solution/pending");case 3:t=e.sent,a=t.data,b(a.data),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("ocurrio un error"),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var m=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={ticketId:t},e.prev=1,e.next=4,T.a.post("api/ticket/solution/aprobed",a);case 4:i(Object(o.a)(Object(o.a)({},r),{},{open:!0,message:"Ticket Marcado como Solucionado",severity:"success"})),n=d.filter((function(e){return e._id!==t})),b(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{children:[Object(n.jsx)(xt,{message:r.message,open:r.open,severity:r.severity,setNotification:i}),Object(n.jsx)(v.a,{container:!0,spacing:1,children:d.map((function(t){return Object(n.jsx)(v.a,{item:!0,md:4,xs:12,sm:6,children:Object(n.jsxs)(ut.a,{className:e.root,children:[Object(n.jsxs)(dt.a,{children:[Object(n.jsx)(ua.a,{className:e.media,image:"".concat("https://sigeftickets.herokuapp.com/","/img/ticket.jpg"),title:"Contemplative Reptile"}),Object(n.jsxs)(jt.a,{children:[Object(n.jsx)(y.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.name}),Object(n.jsx)(y.a,{variant:"body2",color:"textSecondary",component:"p",children:t.solution})]})]}),Object(n.jsxs)(ht.a,{children:[Object(n.jsx)(j.a,{size:"small",color:"primary",href:"/tickets/".concat(t._id),children:"Ver Ticket"}),Object(n.jsx)(j.a,{size:"small",color:"primary",onClick:function(){return m(t._id)},children:"Solucionado"})]})]})})}))})]})},ba=function(){return Object(n.jsx)("div",{children:Object(n.jsx)(We,{section:"Tickets Pendientes de Aprobacion",children:Object(n.jsx)(ja,{})})})},ma=Object(C.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}},formControl:{margin:e.spacing(1),minWidth:"25ch"}}})),pa=function(e){var t=e.user,a=e.addUser,c=e.editUser,i=e.edit,s=e.emptyFields,o=ma(),l=Object(it.b)(),d=l.errors,b=l.handleSubmit,x=l.control,h=(0,l.watch)("userPassword"),g=Object(r.useState)((function(){return!i})),k=Object(u.a)(g,2),y=k[0],C=k[1];return Object(n.jsx)("div",{children:Object(n.jsxs)("form",{onSubmit:b(i?c:a),className:o.root,children:[Object(n.jsxs)(v.a,{container:!0,children:[Object(n.jsxs)(v.a,{item:!0,xs:12,sm:6,children:[Object(n.jsx)(it.a,{rules:{required:{value:!0,message:"Campo requerido"},minLength:{value:6,message:"M\xednimo 6 car\xe1cteres"}},control:x,name:"userName",id:"userName",label:"Nombre",variant:"outlined",defaultValue:t.name||"",as:Object(n.jsx)(m.a,{error:!!d.userName,helperText:d.userName?d.userName.message:null})}),Object(n.jsx)(it.a,{rules:{required:{value:!0,message:"Campo requerido"},minLength:{value:6,message:"M\xednimo 6 car\xe1cteres"}},control:x,name:"userLastName",id:"userLastName",label:"Apellido",variant:"outlined",defaultValue:t.lastName||"",as:Object(n.jsx)(m.a,{error:!!d.userLastName,helperText:d.userLastName?d.userLastName.message:null})}),Object(n.jsx)(f.a,{children:Object(n.jsxs)(at.a,{variant:"outlined",className:o.formControl,children:[Object(n.jsx)(rt.a,{id:"labelPrioridad",children:"Rol"}),Object(n.jsx)(it.a,{name:"userRole",control:x,rules:{required:{value:!0,message:"Campo requerido"}},defaultValue:t.role||"",as:Object(n.jsxs)(ct.a,{labelId:"demo-simple-select-outlined-label",label:"Prioridad",id:"ticketPriority",value:t.role,error:!!d.userRole,children:[Object(n.jsx)(Z.a,{value:"User",children:"Usuario"}),Object(n.jsx)(Z.a,{value:"Admin",children:"Admin"})]})}),Object(n.jsx)(nt.a,{error:!!d.userRole,children:d.userRole?d.userRole.message:null})]})})]}),Object(n.jsxs)(v.a,{xs:12,sm:6,children:[Object(n.jsx)(it.a,{rules:{required:{value:!0,message:"Campo requerido"},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Email con Formato Invalido"}},control:x,name:"userEmail",type:"email",id:"userEmail",label:"Email",variant:"outlined",defaultValue:t.email||"",as:Object(n.jsx)(m.a,{error:!!d.userEmail,helperText:d.userEmail?d.userEmail.message:null})}),Object(n.jsx)(it.a,{rules:{required:{value:!!y,message:"Campo requerido"},minLength:{value:6,message:"La Contrase\xf1a Tiene que Tener al Menos 6 Caracteres"}},control:x,name:"userPassword",type:"password",id:"userPassword",label:"Contrase\xf1a",variant:"outlined",defaultValue:"",disabled:!y,as:Object(n.jsx)(m.a,{error:!!d.userPassword,helperText:d.userPassword?d.userPassword.message:null})}),Object(n.jsx)(it.a,{rules:{required:{value:!!y,message:"Campo requerido"},validate:function(e){return e===h||!y||"Las contrase\xf1as no Coinciden"}},control:x,name:"userPasswordRepeat",type:"password",id:"userPasswordRepeat",label:"Repetir Contrase\xf1a",variant:"outlined",defaultValue:"",disabled:!y,as:Object(n.jsx)(m.a,{error:!!d.userPasswordRepeat,helperText:d.userPasswordRepeat?d.userPasswordRepeat.message:null})})]}),Object(n.jsx)(v.a,{xs:12,sm:12,children:i&&Object(n.jsx)(p.a,{control:Object(n.jsx)(O.a,{checked:y,onChange:function(e){C(e.target.checked)},color:"primary"}),label:"Desea Cambiar la Contrase\xf1a"})})]}),Object(n.jsx)(v.a,{item:!0,sm:12,children:Object(n.jsxs)(f.a,{display:"flex",justifyContent:"flex-end",m:1,p:1,children:[Object(n.jsx)(j.a,{color:"primary",type:"button",onClick:function(){return s()},children:"Cancelar"}),Object(n.jsx)(j.a,{color:"primary",type:"submit",children:"Guardar"})]})})]})})},Oa=Object(C.a)({card:{width:"100%",minWidth:330},media:{height:300},cardAction:{justifyContent:"center"}});function xa(e){var t=e.usersMobile,a=e.edition,r=e.deleteUser,c=Oa();c.bullet;return Object(n.jsx)("div",{children:Object(n.jsx)(f.a,{children:Object(n.jsx)(v.a,{container:!0,spacing:3,children:t.map((function(e){return Object(n.jsx)(v.a,{item:!0,xs:12,sm:12,children:Object(n.jsxs)(ut.a,{className:c.card,children:[Object(n.jsxs)(jt.a,{children:[Object(n.jsxs)(y.a,{color:"primary",variant:"h6",children:[e.nombre," "," "]}),Object(n.jsxs)(y.a,{color:"textSecondary",variant:"subtitle2",children:["Apellido: ",e.lastName]}),Object(n.jsxs)(y.a,{color:"textSecondary",variant:"subtitle2",children:["email: ",e.email]}),Object(n.jsxs)(y.a,{color:"textSecondary",variant:"subtitle2",children:["Rol: ",e.role]})]}),Object(n.jsx)(ee.a,{}),Object(n.jsxs)(ht.a,{className:c.cardAction,children:[Object(n.jsx)(j.a,{size:"small",onClick:function(){return a(e)},children:Object(n.jsx)(kt.a,{})}),Object(n.jsx)(j.a,{size:"small",onClick:function(){return r(e._id)},children:Object(n.jsx)($e.a,{})})]})]})},e._id)}))})})})}var ha=Object(C.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),fa=function(){var e=Object(Me.a)(),t=ha(),a=Object(Ee.a)(e.breakpoints.down("sm")),i=Object(w.d)((function(e){return e.usuario.usuario.data.role})),s=Object(r.useState)(!1),l=Object(u.a)(s,2),d=l[0],b=l[1],p=c.a.useState({open:!1,message:""}),O=Object(u.a)(p,2),x=O[0],h=O[1],g=Object(r.useState)({name:"",lastName:"",role:"",email:""}),k=Object(u.a)(g,2),y=k[0],C=k[1],S=Object(r.useState)([]),I=Object(u.a)(S,2),E=I[0],M=I[1],D=Object(r.useState)(!1),A=Object(u.a)(D,2),F=A[0],L=A[1],P=Object(r.useState)(""),R=Object(u.a)(P,2),B=R[0],Y=R[1],q=Object(r.useState)(!1),z=Object(u.a)(q,2),U=z[0],V=z[1],W=Object(r.useState)([]),G=Object(u.a)(W,2),H=G[0],K=G[1],Z=c.a.useState(null),X=Object(u.a)(Z,2),J=X[0],Q=X[1],$=c.a.useState(null),ee=Object(u.a)($,2),te=ee[0],ae=ee[1];Object(r.useEffect)((function(){(function(){var e=Object(N.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(!0),e.next=3,T.a.get("users/users");case 3:t=e.sent,K(t.data.slice(0,10)),Q(Math.ceil(t.data.length/10)),M(t.data),V(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var ne=function(){var e=Object(N.a)(_.a.mark((function e(t){var n,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(!0),n={name:t.userName,lastName:t.userLastName,email:t.userEmail,password:t.userPassword,role:t.userRole},e.prev=2,e.next=5,T.a.post("users/users",n);case 5:r=e.sent,M([].concat(Object(Ge.a)(E),[r.data])),a&&K([].concat(Object(Ge.a)(H),[r.data])),h(Object(o.a)(Object(o.a)({},x),{},{open:!0,message:"Usuario Creado Correctamente"})),oe(),V(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),re=function(e){Y(e._id),C({name:e.nombre,lastName:e.lastName,email:e.email,role:e.role}),L(!0),b(!0),console.log(y)},ce=function(){var e=Object(N.a)(_.a.mark((function e(t){var n,r,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(!0),n={name:t.userName,lastName:t.userLastName,email:t.userEmail,password:t.userPassword,role:t.userRole},e.prev=2,e.next=5,T.a.put("users/users/".concat(B),n);case 5:r=e.sent,c=E.map((function(e){return e._id===B?r.data:e})),console.log(r.data),M(c),a&&K(null===te?c.slice(0,10):c.slice(10*te-10,10*te)),h(Object(o.a)(Object(o.a)({},x),{},{open:!0,message:"Usuario Editado Correctamente"})),oe(),V(!1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(N.a)(_.a.mark((function e(t){var n,r,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],a?n.push(t):t.map((function(e){return n.push(e._id)})),r=window.confirm("Estas Seguro de Eliminar El/Los Registro/s"),e.prev=3,!r){e.next=11;break}return e.next=7,T.a.post("users/users/delete/many",n);case 7:c=E.filter((function(e){return!n.includes(e._id)})),M(c),a&&K(null===te?c.slice(0,10):c.slice(10*te-10,10*te)),h(Object(o.a)(Object(o.a)({},x),{},{open:!0,message:"Usuario/s Eliminado/s Correctamente"}));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){b(!1),L(!1)},oe=function(){se(),C({name:"",lastName:"",role:"",email:""}),Y("")};return Object(n.jsxs)(r.Fragment,{children:[Object(n.jsxs)(v.a,{container:!0,spacing:1,children:[Object(n.jsx)(v.a,{item:!0,sm:12,children:Object(n.jsx)(f.a,{children:Object(n.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){return b(!0)},children:"Nuevo Usuario"})})}),Object(n.jsx)(v.a,{item:!0,xs:12,children:a&&Object(n.jsx)(f.a,{mt:2,display:"flex",justifyContent:"center",children:Object(n.jsx)(m.a,{id:"input-with-icon-textfield",label:"Buscar por Nombre",onChange:function(e){return function(e){if(""===e)K(te>1?E.slice(10*te-10,10*te):E.slice(0,10));else{var t=e.toLowerCase(),a=E.filter((function(e){return-1!==e.nombre.toLowerCase().indexOf(t)}));K(a)}}(e.target.value)},InputProps:{startAdornment:Object(n.jsx)(Ze.a,{position:"start",children:Object(n.jsx)(St.a,{})})}})})}),Object(n.jsx)(v.a,{item:!0,sm:12,children:Object(n.jsxs)(f.a,{mt:2,children:[Object(n.jsx)(Xe.a,{className:t.backdrop,open:U,onClick:!U,children:Object(n.jsx)(_e.a,{color:"inherit"})}),a?Object(n.jsx)(xa,{usersMobile:H,edition:re,deleteUser:ie}):Object(n.jsx)(Ke.a,{columns:[{title:"Id",field:"_id",hidden:!0},{title:"Nombre",field:"nombre"},{title:"Apellido",field:"lastName"},{title:"role",field:"role"},{title:"email",field:"email"}],data:E,actions:[{hidden:"Admin"!==i,icon:"edit",tooltip:"Editar",position:"row",onClick:function(e,t){return re(t)}},{hidden:"Admin"!==i,icon:function(){return Object(n.jsx)($e.a,{})},position:"toolbarOnSelect",tooltip:"Borrar",onClick:function(e,t){return ie(t)}}],options:{actionsColumnIndex:-1,selection:!0,pageSize:10},title:"Usuarios"})]})})]}),a&&Object(n.jsx)(f.a,{ml:-2,mt:2,display:"flex",justifyContent:"center",children:Object(n.jsx)(_t.a,{count:J,color:"primary",onChange:function(e,t){return function(e){V(!0),ae(e),K(E.slice(10*e-10,10*e)),V(!1)}(t)}})}),Object(n.jsx)(xt,{message:x.message,open:x.open,severity:"success",setNotification:h}),Object(n.jsx)(Ae,{openPopup:d,title:F?"Editar Usuario":"Agregar Usuario",closeForm:se,loading:U,children:Object(n.jsx)(pa,{edit:F,user:y,addUser:ne,editUser:ce,emptyFields:oe})})]})},va=function(){return Object(n.jsx)("div",{children:Object(n.jsx)(We,{section:"Usuarios",children:Object(n.jsx)(fa,{})})})},ga=a(230),ka=Object(Bt.GoogleApiWrapper)({apiKey:"AIzaSyDAwZoCkxg0z2pKbKsjZhBM_NX0S8H44vg",libraries:["places"],language:"es-ES"})((function(e){var t=e.setDataAddress,a=e.institution,c=e.edit,i=Object(r.useState)(null),s=Object(u.a)(i,2),o=(s[0],s[1]),l=Object(r.useState)(!1),d=Object(u.a)(l,2),j=(d[0],d[1],Object(r.useState)({})),b=Object(u.a)(j,2),m=(b[0],b[1],Object(r.useState)({})),p=Object(u.a)(m,2),O=(p[0],p[1],Object(r.useState)({lat:-26.185164,lng:-58.174386})),x=Object(u.a)(O,2),h=x[0],f=x[1];Object(r.useEffect)((function(){if(c){t(a.address);var e=document.getElementsByClassName("css-1wa3eu0-placeholder");e.length>0&&(e[0].innerHTML=a.address.name),f({lat:a.address.lat,lng:a.address.lng})}}),[]);var v=function(){var e=Object(N.a)(_.a.mark((function e(a){var n,r,c,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(a.label),e.prev=1,e.next=4,Object(ga.b)(a.label);case 4:return n=e.sent,e.next=7,Object(ga.d)(n[0]);case 7:r=e.sent,c=k(n[0].address_components),i=n[0].formatted_address,t({name:i,locality:c.locality,department:c.departament,lat:r.lat,lng:r.lng}),f(r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(N.a)(_.a.mark((function e(a,n){var r,c,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ga.c)({lat:a,lng:n});case 3:r=e.sent,c=k(r[0].address_components),i=r[0].formatted_address,console.log(c),o(i),t({name:i,locality:c.locality,department:c.departament,lat:a,lng:n}),(s=document.getElementsByClassName("css-1wa3eu0-placeholder")).length>0&&(s[0].innerHTML=i),(l=document.getElementsByClassName("css-1uccc91-singleValue")).length>0&&(l[0].innerHTML=i),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,a){return e.apply(this,arguments)}}(),k=function(e){var t={home:["street_number"],postal_code:["postal_code"],street:["street_address","route"],province:["administrative_area_level_1","administrative_area_level_3","administrative_area_level_4","administrative_area_level_5"],locality:["locality","sublocality","sublocality_level_1","sublocality_level_2","sublocality_level_3","sublocality_level_4"],departament:["administrative_area_level_2"],country:["country"]},a={home:"",postal_code:"",street:"",province:"",locality:"",departament:"",country:""};return e.forEach((function(e){for(var n in t)-1!==t[n].indexOf(e.types[0])&&(a[n]="country"===n?e.short_name:e.long_name)})),a};return Object(n.jsxs)(r.Fragment,{children:[Object(n.jsx)(ga.a,{onLoadFailed:function(e){return console.error("Could not inject Google script",e)},autocompletionRequest:{componentRestrictions:{country:["ar"]}},selectProps:{onChange:v,placeholder:"Direccion..."}}),Object(n.jsx)(Bt.Map,{google:e.google,containerStyle:{marginTop:"10px"},zoom:16,onClick:function(e,t,a){return function(e,t,a){var n=a.latLng.lat(),r=a.latLng.lng();g(n,r),f({lat:n,lng:r})}(0,0,a)},initialCenter:{lat:h.lat,lng:h.lng},center:{lat:h.lat,lng:h.lng},children:Object(n.jsx)(Bt.Marker,{position:{lat:h.lat,lng:h.lng}})})]})})),ya=Object(C.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}},formControl:{margin:e.spacing(1),minWidth:"25ch"}}})),Ca=function(e){var t=e.institution,a=e.addInstitution,r=e.editInstitution,c=e.edit,i=e.emptyFields,s=e.setDataAddress,o=ya(),l=Object(it.b)(),u=l.errors,d=l.handleSubmit,b=l.control;return Object(n.jsx)("div",{children:Object(n.jsxs)("form",{onSubmit:d(c?r:a),className:o.root,children:[Object(n.jsxs)(v.a,{container:!0,children:[Object(n.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(it.a,{rules:{required:{value:!0,message:"Campo requerido"},minLength:{value:6,message:"M\xednimo 6 car\xe1cteres"}},control:b,name:"institutionName",id:"institutionName",label:"Nombre",variant:"outlined",defaultValue:t.name||"",as:Object(n.jsx)(m.a,{error:!!u.institutionName,helperText:u.institutionName?u.institutionName.message:null})})}),Object(n.jsx)(v.a,{Item:!0,xs:12,sm:6,children:Object(n.jsx)(it.a,{rules:{},control:b,name:"institutionCue",id:"institutionCue",label:"CUE",variant:"outlined",defaultValue:t.cue||"",type:"number",as:Object(n.jsx)(m.a,{error:!!u.institutionCue,helperText:u.institutionCue?u.institutionCue.message:null})})}),Object(n.jsx)(v.a,{item:!0,xs:11,style:{position:"relative",height:"40vh"},children:Object(n.jsx)(f.a,{mt:2,ml:2,children:Object(n.jsx)(ka,{setDataAddress:s,institution:t,edit:c})})})]}),Object(n.jsx)(v.a,{item:!0,sm:12,children:Object(n.jsxs)(f.a,{display:"flex",justifyContent:"flex-end",m:1,p:1,mt:8,children:[Object(n.jsx)(j.a,{color:"primary",type:"button",onClick:function(){return i()},children:"Cancelar"}),Object(n.jsx)(j.a,{color:"primary",type:"submit",children:"Guardar"})]})})]})})},wa=Object(C.a)({card:{width:"100%",minWidth:275},media:{height:300},cardAction:{justifyContent:"center"}});function Sa(e){var t=e.institutionMobile,a=e.edition,r=e.deleteInstitutions,c=wa();c.bullet;return Object(n.jsx)("div",{children:Object(n.jsx)(f.a,{children:Object(n.jsx)(v.a,{container:!0,spacing:3,children:t.map((function(e){return Object(n.jsx)(v.a,{item:!0,xs:12,sm:12,children:Object(n.jsxs)(ut.a,{className:c.card,children:[Object(n.jsxs)(jt.a,{children:[Object(n.jsxs)(y.a,{color:"primary",variant:"h6",children:[e.name," "," "]}),Object(n.jsxs)(y.a,{color:"textSecondary",variant:"subtitle2",children:["Cue: ",e.cue]}),e.address?Object(n.jsxs)("div",{children:[Object(n.jsxs)(y.a,{color:"textSecondary",variant:"subtitle2",children:["Direccion: ",e.address.name]}),Object(n.jsxs)(y.a,{color:"textSecondary",variant:"subtitle2",children:["Departamento: ",e.address.department]}),Object(n.jsxs)(y.a,{color:"textSecondary",variant:"subtitle2",children:["Localidad: ",e.address.department]})]}):null]}),Object(n.jsx)(ee.a,{}),Object(n.jsxs)(ht.a,{className:c.cardAction,children:[Object(n.jsx)(j.a,{size:"small",onClick:function(){return a(e)},children:Object(n.jsx)(kt.a,{})}),Object(n.jsx)(j.a,{size:"small",onClick:function(){return r(e._id)},children:Object(n.jsx)($e.a,{})})]})]})},e._id)}))})})})}var _a=Object(C.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Na=function(){var e=Object(w.d)((function(e){return e.usuario.usuario.data.role})),t=Object(Me.a)(),a=_a(),i=Object(Ee.a)(t.breakpoints.down("sm")),s=Object(r.useState)(!1),l=Object(u.a)(s,2),d=l[0],b=l[1],p=Object(r.useState)(!1),O=Object(u.a)(p,2),x=O[0],h=O[1],g=Object(r.useState)({open:!1,message:""}),k=Object(u.a)(g,2),y=k[0],C=k[1],S=Object(r.useState)({name:"",address:"",cue:""}),I=Object(u.a)(S,2),E=I[0],M=I[1],D=Object(r.useState)([]),A=Object(u.a)(D,2),F=A[0],L=A[1],P=Object(r.useState)(!1),R=Object(u.a)(P,2),B=R[0],Y=R[1],q=Object(r.useState)(""),z=Object(u.a)(q,2),U=z[0],V=z[1],W=Object(r.useState)({}),G=Object(u.a)(W,2),H=G[0],K=G[1],Z=c.a.useState([]),X=Object(u.a)(Z,2),J=X[0],Q=X[1],$=c.a.useState(null),ee=Object(u.a)($,2),te=ee[0],ae=ee[1],ne=c.a.useState(null),re=Object(u.a)(ne,2),ce=re[0],ie=re[1];Object(r.useEffect)((function(){(function(){var e=Object(N.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,T.a.get("institutions/institutions");case 3:t=e.sent,L(t.data),Q(t.data.slice(0,10)),ae(Math.ceil(t.data.length/10)),b(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var se=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),a={name:t.institutionName,address:H,cue:t.institutionCue},e.prev=2,e.next=5,T.a.post("institutions/institutions",a);case 5:n=e.sent,L([].concat(Object(Ge.a)(F),[n.data])),i&&Q([].concat(Object(Ge.a)(J),[n.data])),C(Object(o.a)(Object(o.a)({},y),{},{open:!0,message:"Institucion Creada Correctamente"})),je(),b(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(e){V(e._id),M({name:e.name,address:e.address,cue:e.cue}),Y(!0),h(!0)},le=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),a={name:t.institutionName,address:H,cue:t.institutionCue},e.prev=2,e.next=5,T.a.put("institutions/institutions/".concat(U),a);case 5:n=e.sent,r=F.map((function(e){return e._id===U?n.data:e})),L(r),i&&Q(null===ce?r.slice(0,10):r.slice(10*ce-10,10*ce)),C(Object(o.a)(Object(o.a)({},y),{},{open:!0,message:"Institucion Editada Correctamente"})),je(),b(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],i?a.push(t):t.map((function(e){return a.push(e._id)})),n=window.confirm("Estas Seguro de Eliminar El/Los Registro/s"),e.prev=3,!n){e.next=11;break}return e.next=7,T.a.post("institutions/institutions/delete/many",a);case 7:r=F.filter((function(e){return!a.includes(e._id)})),L(r),i&&Q(null===ce?r.slice(0,10):r.slice(10*ce-10,10*ce)),C(Object(o.a)(Object(o.a)({},y),{},{open:!0,message:"Intitucion/es Eliminada/s Correctamente"}));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){h(!1),Y(!1)},je=function(){de(),M({name:"",address:"",cue:""}),V("")};return Object(n.jsxs)(r.Fragment,{children:[Object(n.jsxs)(v.a,{container:!0,spacing:1,children:[Object(n.jsx)(v.a,{item:!0,sm:12,children:Object(n.jsx)(f.a,{children:Object(n.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){return h(!0)},children:"Nueva Institucion"})})}),Object(n.jsx)(v.a,{item:!0,xs:12,children:i&&Object(n.jsx)(f.a,{mt:2,display:"flex",justifyContent:"center",children:Object(n.jsx)(m.a,{id:"input-with-icon-textfield",label:"Buscar por Institucion",onChange:function(e){return function(e){if(""===e)Q(ce>1?F.slice(10*ce-10,10*ce):F.slice(0,10));else{var t=e.toLowerCase(),a=F.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t)}));Q(a)}}(e.target.value)},InputProps:{startAdornment:Object(n.jsx)(Ze.a,{position:"start",children:Object(n.jsx)(St.a,{})})}})})}),Object(n.jsx)(v.a,{item:!0,sm:12,children:Object(n.jsxs)(f.a,{mt:2,children:[Object(n.jsx)(Xe.a,{className:a.backdrop,open:d,onClick:!d,children:Object(n.jsx)(_e.a,{color:"inherit"})}),i?Object(n.jsx)(Sa,{institutionMobile:J,edition:oe,deleteInstitutions:ue}):Object(n.jsx)(Ke.a,{columns:[{title:"Id",field:"_id",hidden:!0},{title:"Nombre",field:"name"},{title:"Direccion",field:"address.name"},{title:"CUE",field:"cue"},{title:"Departamento",field:"address.department"},{title:"Localidad",field:"address.locality"}],data:F,actions:[{hidden:"Admin"!==e,icon:"edit",tooltip:"Editar",position:"row",onClick:function(e,t){return oe(t)}},{hidden:"Admin"!==e,icon:function(){return Object(n.jsx)($e.a,{})},position:"toolbarOnSelect",tooltip:"Borrar",onClick:function(e,t){return ue(t)}}],options:{actionsColumnIndex:-1,selection:!0,pageSize:10},title:"Instituciones"})]})})]}),i&&Object(n.jsx)(f.a,{ml:-2,mt:2,display:"flex",justifyContent:"center",children:Object(n.jsx)(_t.a,{count:te,color:"primary",onChange:function(e,t){return function(e){b(!0),ie(e),Q(F.slice(10*e-10,10*e)),b(!1)}(t)}})}),Object(n.jsx)(xt,{message:y.message,open:y.open,severity:"success",setNotification:C}),Object(n.jsx)(Ae,{openPopup:x,title:B?"Editar Institucion":"Agregar Institucion",closeForm:de,loading:d,children:Object(n.jsx)(Ca,{edit:B,institution:E,addInstitution:se,editInstitution:le,emptyFields:je,setDataAddress:K})})]})},Ia=function(){return Object(n.jsx)("div",{children:Object(n.jsx)(We,{section:"Instituciones",children:Object(n.jsx)(Na,{})})})},Ta=a(513),Ea=a.n(Ta),Ma=(a(644),a(511)),Da=(a(757),a(512)),Aa=a.n(Da),Fa=a(111),La=a(8),Pa=a(38),Ra=Object(La.a)((function(){return{root:{display:"flex",margin:"auto",flexDirection:"row"}}}),{name:"LegendRoot"})((function(e){var t=e.classes,a=Object(l.a)(e,["classes"]);return Object(n.jsx)(Fa.d.Root,Object(o.a)(Object(o.a)({},a),{},{className:t.root}))})),Ba=Object(C.a)((function(e){return{button:{margin:e.spacing(1)}}})),Ya=function(e){vt.a.locale("es",Aa.a);var t=Object(Me.a)(),a=Ba(),c=Object(Ee.a)(t.breakpoints.down("sm")),i=Object(w.d)((function(e){return e.usuario.usuario.data._id})),s=Object(w.d)((function(e){return e.usuario.role})),o=Object(w.d)((function(e){return e.usuario.usuario.data.nombre})),l=Object(r.useState)(vt()()),d=Object(u.a)(l,2),b=d[0],m=d[1],p=Object(r.useState)(vt()()),O=Object(u.a)(p,2),x=O[0],g=O[1],k=Object(r.useState)(null),y=Object(u.a)(k,2),C=y[0],S=y[1],I=Object(r.useState)([]),E=Object(u.a)(I,2),M=E[0],D=E[1],A=Object(r.useState)([]),F=Object(u.a)(A,2),L=F[0],P=F[1],R=window.matchMedia("(max-width: 700px)").matches?"vertical":"horizontal";Object(r.useEffect)((function(){P([]),B()}),[b,x]),Object(r.useEffect)((function(){M.map((function(e){return P((function(t){return[].concat(Object(Ge.a)(t),[{mes:"".concat(vt.a.months(e._id.mes-1)," - ").concat(e._id.anio," "),solucionado:e.solucionado,noSolucionado:e.noSolucionado}])}))}))}),[M]);var B=function(){var e=Object(N.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.get("api/range-date?usuarioId=".concat(i,"&startDate=").concat(b,"&endDate=").concat(x,"&role=").concat(s));case 3:t=e.sent,D(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(N.a)(_.a.mark((function e(){var t,a,n,r,c,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M.reduce((function(e,t){return e+t.noSolucionado}),0),a=M.reduce((function(e,t){return e+t.solucionado}),0),n={noSolucionado:t,solucionado:a,total:t+a,userName:o,role:s,startDate:b._d,endDate:x._d},console.log(t),e.prev=5,e.next=8,T.a.post("api/pdf",n,{responseType:"blob"});case 8:r=e.sent,c=new Blob([r.data],{type:"application/pdf"}),i=URL.createObjectURL(c),window.open(i),console.log(c),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(r.Fragment,{children:Object(n.jsxs)(v.a,{container:!0,children:[Object(n.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(f.a,{display:"flex",justifyContent:c?"center":"flex-start",children:Object(n.jsx)(Ma.DateRangePicker,{startDate:b,startDateId:"s_id",endDate:x,endDateId:"e_id",onDatesChange:function(e){var t=e.startDate,a=e.endDate;m(t),g(a)},focusedInput:C,onFocusChange:function(e){return S(e)},displayFormat:"DD/MM/YYYY",isOutsideRange:function(){return!1},withPortal:!0,orientation:R,autoFocus:!0})})}),Object(n.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(f.a,{display:"flex",justifyContent:c?"center":"flex-end",children:Object(n.jsx)(j.a,{variant:"contained",color:"default",className:a.button,startIcon:Object(n.jsx)(Ea.a,{}),onClick:function(){return Y()},children:"Generar Informe"})})}),Object(n.jsx)(v.a,{item:!0,xs:12,children:Object(n.jsx)(f.a,{mt:2,children:Object(n.jsx)(h.a,{variant:"outlined",children:Object(n.jsxs)(Fa.c,{data:L,children:[Object(n.jsx)(Fa.a,{}),Object(n.jsx)(Fa.f,{}),Object(n.jsx)(Fa.b,{name:"Solucionado",valueField:"solucionado",argumentField:"mes",color:"#0FFF04"}),Object(n.jsx)(Fa.b,{name:"No Solucionado",valueField:"noSolucionado",argumentField:"mes",color:"#FF0404"}),Object(n.jsx)(Pa.a,{}),Object(n.jsx)(Fa.d,{position:"bottom",rootComponent:Ra}),Object(n.jsx)(Fa.e,{text:"Situacion Tickets"}),Object(n.jsx)(Pa.i,{})]})})})})]})})},qa=function(){return Object(n.jsx)(We,{section:"Reportes Detallados",children:Object(n.jsx)(Ya,{})})};var za=function(){var e=function(e){var t=e.component,a=e.path,r=Object(l.a)(e,["component","path"]);return Object(w.d)((function(e){return e.usuario.token}))?Object(n.jsx)(L.b,Object(o.a)({component:t,path:a},r)):Object(n.jsx)(L.a,Object(o.a)({to:"/"},r))},t=function(e){var t=e.component,a=e.path,r=Object(l.a)(e,["component","path"]);return"Admin"===Object(w.d)((function(e){return e.usuario.role}))?Object(n.jsx)(L.b,Object(o.a)({component:t,path:a},r)):Object(n.jsx)(L.a,Object(o.a)({to:"/"},r))},a=Object(w.d)((function(e){return e.usuario.token}));return T.a.defaults.headers.common.token=a,Object(n.jsx)(ve.a,{children:Object(n.jsxs)(L.d,{children:[Object(n.jsx)(L.b,{component:B,path:"/",exact:!0}),Object(n.jsx)(e,{component:We,path:"/dashboard",exact:!0}),Object(n.jsx)(e,{component:Tt,path:"/tickets",exact:!0}),Object(n.jsx)(e,{component:aa,path:"/tickets/:id",exact:!0}),Object(n.jsx)(e,{component:la,path:"/calendar",exact:!0}),Object(n.jsx)(e,{component:qa,path:"/reportes",exact:!0}),Object(n.jsx)(t,{component:ba,path:"/admin/pendientes",exact:!0}),Object(n.jsx)(t,{component:va,path:"/admin/users",exact:!0}),Object(n.jsx)(t,{component:Ia,path:"/admin/instituciones",exact:!0})]})})},Ua=a(86),Va=a(514),Wa=Object(Ua.c)({usuario:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(o.a)(Object(o.a)({},e),{},{activo:!0,usuario:t.payload.usuario,role:t.payload.role,token:t.payload.token});case A:return Object(o.a)(Object(o.a)({},M),{},{role:""});default:return e}}}),Ga=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ua.d;var Ha=function(){var e=Object(Ua.e)(Wa,Ga(Object(Ua.a)(Va.a)));return function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.getItem("usuario")&&(a=JSON.parse(localStorage.getItem("usuario")),n=Object(E.a)(a.token),t({type:D,payload:{token:a.token,usuario:n,role:n.data.role}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(e.dispatch),e}();T.a.defaults.baseURL="https://sigeftickets.herokuapp.com/",s.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(w.a,{store:Ha,children:Object(n.jsx)(za,{})})}),document.getElementById("root"))}},[[758,1,2]]]);
//# sourceMappingURL=main.5270b197.chunk.js.map