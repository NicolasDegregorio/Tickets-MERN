(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{531:function(e,t,a){},632:function(e,t){},734:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),i=a(21),s=a.n(i),o=(a(531),a(15)),l=a(130),u=a(18),d=a(790),j=a(396),b=a(764),m=a(394),p=a(395),O=a(480),x=a(762),h=a(120),f=a(306),v=a(763),g=a(487),k=a.n(g),y=a(93),C=a(393),S=a(33),w=a(13),_=a.n(w),N=a(24),I=a(26),E=a.n(I),T=a(331),D={activo:!1},F="GET_LOGIN_SUCCESS",P="CERRAR_SESSION";var L=a(50);function R(){return Object(n.jsxs)(y.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(n.jsx)(x.a,{color:"inherit",href:"https://material-ui.com/",children:"Nicolas degregorio"})," ",(new Date).getFullYear(),"."]})}var M=Object(C.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(".concat("https://sigeftickets.herokuapp.com/","img/sigef-logo.png)"),backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"contain",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),A=Object(L.h)((function(e){var t=M(),a=Object(S.c)(),r=Object(S.d)((function(e){return e.usuario.activo})),i=c.a.useState({email:"",password:""}),s=Object(u.a)(i,2),l=s[0],x=s[1];c.a.useEffect((function(){r&&e.history.push("/tickets")}),[e.history,r]);return Object(n.jsxs)(v.a,{container:!0,component:"main",className:t.root,children:[Object(n.jsx)(b.a,{}),Object(n.jsx)(v.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),Object(n.jsx)(v.a,{item:!0,xs:12,sm:8,md:5,component:h.a,elevation:6,square:!0,children:Object(n.jsxs)("div",{className:t.paper,children:[Object(n.jsx)(d.a,{className:t.avatar,children:Object(n.jsx)(k.a,{})}),Object(n.jsx)(y.a,{component:"h1",variant:"h5",children:"Iniciar Sesion"}),Object(n.jsxs)("form",{className:t.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),a(function(e){return function(){var t=Object(N.a)(_.a.mark((function t(a,n){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.post("users",e);case 3:r=t.sent,a({type:F,payload:{token:r.data.token,usuario:Object(T.a)(r.data.token),role:r.data.role.role}}),localStorage.setItem("usuario",JSON.stringify({token:r.data.token})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.response.data),alert(t.t0.response.data.mensaje);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}()}(l))},children:[Object(n.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Correo Electronico",name:"email",autoComplete:"email",onChange:function(e){return x(Object(o.a)(Object(o.a)({},l),{},{email:e.target.value}))},autoFocus:!0}),Object(n.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Contrase\xf1a",type:"password",id:"password",onChange:function(e){return x(Object(o.a)(Object(o.a)({},l),{},{password:e.target.value}))},autoComplete:"current-password"}),Object(n.jsx)(p.a,{control:Object(n.jsx)(O.a,{value:"remember",color:"primary"}),label:"Recordar"}),Object(n.jsx)(j.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Iniciar Sesion"}),Object(n.jsx)(v.a,{container:!0}),Object(n.jsx)(f.a,{mt:5,children:Object(n.jsx)(R,{})})]})]})})]})})),B=a(3),q=a(770),U=a(766),V=a(398),Y=a(324),W=a(489),z=a.n(W),G=a(254),H=a(397);function J(){var e=c.a.useState(null),t=Object(u.a)(e,2),a=t[0],r=t[1],i=Object(S.d)((function(e){return e.usuario.usuario.data.nombre})),s=Object(S.c)(),o=function(){r(null)};return Object(n.jsxs)("div",{children:[Object(n.jsx)(j.a,{color:"inherit","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){r(e.currentTarget)},children:i}),Object(n.jsxs)(G.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{horizontal:"center"},open:Boolean(a),onClose:o,children:[Object(n.jsx)(H.a,{onClick:o,children:"Profile"}),Object(n.jsx)(H.a,{onClick:o,children:"My account"}),Object(n.jsx)(H.a,{onClick:function(){return s((function(e){e({type:P}),localStorage.removeItem("usuario")}))},children:"Cerrar Sesion"})]})]})}var K=Object(C.a)((function(e){return{toolbar:{paddingRight:24},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1}}})),X=function(e){var t=e.handleDrawerOpen,a=e.open,r=K();return Object(n.jsx)("div",{children:Object(n.jsx)(U.a,{position:"absolute",className:Object(B.a)(r.appBar,a&&r.appBarShift),children:Object(n.jsxs)(V.a,{className:r.toolbar,children:[Object(n.jsx)(Y.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:t,className:Object(B.a)(r.menuButton,a&&r.menuButtonHidden),children:Object(n.jsx)(z.a,{})}),Object(n.jsx)(y.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:r.title,children:e.section}),Object(n.jsx)(Y.a,{color:"inherit",children:Object(n.jsx)(J,{})})]})})})},Z=a(58),Q=a(94),$=a(769),ee=a(511),te=a(496),ae=a.n(te),ne=a(512),re=a(767),ce=a(328),ie=a(768),se=a(490),oe=a.n(se),le=a(267),ue=a.n(le),de=a(494),je=a.n(de),be=a(491),me=a.n(be),pe=a(495),Oe=a.n(pe),xe=a(492),he=a.n(xe),fe=a(493),ve=a.n(fe),ge=a(98),ke=Object(n.jsxs)("div",{children:[Object(n.jsxs)(ne.a,{button:!0,children:[Object(n.jsx)(re.a,{children:Object(n.jsx)(oe.a,{})}),Object(n.jsx)(ce.a,{primary:"Dashboard"})]}),Object(n.jsxs)(ne.a,{button:!0,component:ge.b,to:"/tickets",activeClassName:"Mui-selected",children:[Object(n.jsx)(re.a,{children:Object(n.jsx)(ue.a,{})}),Object(n.jsx)(ce.a,{primary:"Tickets"})]}),Object(n.jsxs)(ne.a,{button:!0,component:ge.b,to:"/reportes",activeClassName:"Mui-selected",children:[Object(n.jsx)(re.a,{children:Object(n.jsx)(me.a,{})}),Object(n.jsx)(ce.a,{primary:"Reporte"})]}),Object(n.jsxs)(ne.a,{button:!0,component:ge.b,to:"/calendar",activeClassName:"Mui-selected",children:[Object(n.jsx)(re.a,{children:Object(n.jsx)(he.a,{})}),Object(n.jsx)(ce.a,{primary:"Calendario"})]})]}),ye=Object(n.jsxs)("div",{children:[Object(n.jsx)(ie.a,{inset:!0,children:"Administracion"}),Object(n.jsxs)(ne.a,{button:!0,component:ge.b,to:"/admin/pendientes",activeClassName:"Mui-selected",children:[Object(n.jsx)(re.a,{children:Object(n.jsx)(ve.a,{})}),Object(n.jsx)(ce.a,{primary:"Tickets Pendiente"})]}),Object(n.jsxs)(ne.a,{button:!0,component:ge.b,to:"/admin/users",activeClassName:"Mui-selected",children:[Object(n.jsx)(re.a,{children:Object(n.jsx)(je.a,{})}),Object(n.jsx)(ce.a,{primary:"Usuarios"})]}),Object(n.jsxs)(ne.a,{button:!0,component:ge.b,to:"/admin/instituciones",activeClassName:"Mui-selected",children:[Object(n.jsx)(re.a,{children:Object(n.jsx)(Oe.a,{})}),Object(n.jsx)(ce.a,{primary:"Instituciones"})]})]}),Ce=Object(C.a)((function(e){return{toolbarIcon:Object(o.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),drawer:{flexShrink:0,whiteSpace:"nowrap"},drawerPaper:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(Z.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1})}})),Se=function(e){var t,a=e.handleDrawerClose,r=e.open,c=Ce(),i=Object(S.d)((function(e){return e.usuario.role}));return Object(n.jsx)("div",{children:Object(n.jsxs)(Q.a,{variant:"permanent",className:Object(B.a)(c.drawer,(t={},Object(Z.a)(t,c.drawerPaper,r),Object(Z.a)(t,c.drawerPaperClose,!r),t)),classes:{paper:Object(B.a)(c.drawerPaper,!r&&c.drawerPaperClose)},open:r,children:[Object(n.jsx)("div",{className:c.toolbarIcon,children:Object(n.jsx)(Y.a,{onClick:a,children:Object(n.jsx)(ae.a,{})})}),Object(n.jsx)($.a,{}),Object(n.jsx)(ee.a,{children:ke}),Object(n.jsx)($.a,{}),"Admin"===i&&Object(n.jsx)(ee.a,{children:ye})]})})};function we(){_e();return Object(n.jsxs)(y.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(n.jsx)(x.a,{color:"inherit",href:"https://material-ui.com/",children:"Nicolas Degregorio"})," ",(new Date).getFullYear(),"."]})}var _e=Object(C.a)((function(e){return{root:{display:"flex",minHeight:"100vh"},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},footer:{marginTop:"1rem",position:"fixed",bottom:0,left:0,width:"100%",padding:"1rem",backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[800]}}}));function Ne(e){var t=e.children,a=_e(),r=c.a.useState(!0),i=Object(u.a)(r,2),s=i[0],o=i[1];return Object(n.jsxs)("div",{className:a.root,children:[Object(n.jsx)(b.a,{}),Object(n.jsx)(X,{handleDrawerOpen:function(){o(!0)},open:s,section:e.section}),Object(n.jsx)(Se,{handleDrawerClose:function(){o(!1)},open:s}),Object(n.jsxs)("main",{className:a.content,children:[Object(n.jsx)("div",{className:a.appBarSpacer}),Object(n.jsx)(q.a,{maxWidth:"lg",className:a.container,children:Object(n.jsx)(v.a,{container:!0,spacing:3,children:Object(n.jsx)(v.a,{item:!0,xs:12,children:t})})}),Object(n.jsx)("footer",{className:a.footer,children:Object(n.jsx)(we,{})})]})]})}var Ie=a(40),Ee=a(141),Te=a.n(Ee),De=a(399),Fe=a(483),Pe=a(107),Le=a.n(Pe),Re=a(499),Me=a.n(Re),Ae=a(773),Be=a(783),qe=a(774),Ue=a(498),Ve=a.n(Ue),Ye=Object(C.a)((function(e){return{dialogWrapper:{padding:e.spacing(2),position:"absolute",top:e.spacing(5)},dialogTitle:{paddingRight:"0px"}}}));function We(e){var t=e.title,a=e.children,r=e.openPopup,c=e.closeForm,i=e.loading,s=Ye();return Object(n.jsxs)(Ae.a,{open:r,maxWidth:"sm",classes:{paper:s.dialogWrapper},children:[Object(n.jsx)(Be.a,{className:s.dialogTitle,children:Object(n.jsxs)("div",{style:{display:"flex"},children:[Object(n.jsx)(y.a,{variant:"h6",component:"div",style:{flexGrow:1},children:t}),i&&Object(n.jsx)(De.a,{}),Object(n.jsx)(Y.a,{"aria-label":"delete",onClick:function(){return c()},children:Object(n.jsx)(Ve.a,{})})]})}),Object(n.jsx)(qe.a,{dividers:!0,children:a})]})}var ze=a(321),Ge=a(322),He=a(329),Je=a(323),Ke=a(48),Xe=Object(C.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}},formControl:{margin:e.spacing(1),minWidth:"25ch"}}})),Ze=function(e){var t=e.ticket,a=e.addTicket,r=e.editTicket,c=e.edit,i=e.institutions,s=e.users,o=e.emptyFields,l=Xe(),u=Object(Ke.b)(),d=u.register,b=u.errors,p=u.handleSubmit,O=u.control;return Object(n.jsx)("div",{children:Object(n.jsx)("form",{onSubmit:p(c?r:a),className:l.root,children:Object(n.jsxs)(v.a,{container:!0,children:[Object(n.jsxs)(v.a,{item:!0,sm:6,children:[Object(n.jsxs)(ze.a,{variant:"outlined",className:l.formControl,children:[Object(n.jsx)(Ge.a,{id:"demo-simple-select-outlined-label",children:"Institucion"}),Object(n.jsx)(Ke.a,{name:"ticketInstitution",control:O,rules:{required:{value:!0,message:"Campo requerido"}},defaultValue:t.institution||"",as:Object(n.jsx)(He.a,{labelId:"demo-simple-select-outlined-label",id:"ticketLeader",value:t.institution,error:!!b.ticketInstitution,label:"Encargado",children:i.map((function(e,t){return Object(n.jsx)(H.a,{value:e._id,children:e.name},t)}))})}),Object(n.jsxs)(Je.a,{error:!!b.ticketInstitution,children:[b.ticketInstitution?b.ticketInstitution.message:null," "]})]}),Object(n.jsx)(Ke.a,{rules:{required:{value:!0,message:"Campo requerido"},minLength:{value:6,message:"M\xednimo 6 car\xe1cteres"}},name:"ticketDescription",id:"ticketDescription",label:"Descripcion",control:O,multiline:!0,rowsMax:4,variant:"outlined",defaultValue:t.description||"",as:Object(n.jsx)(m.a,{error:!!b.ticketDescription,helperText:b.ticketDescription?b.ticketDescription.message:null})}),Object(n.jsxs)(ze.a,{variant:"outlined",className:l.formControl,children:[Object(n.jsx)(Ge.a,{id:"demo-simple-select-outlined-label",children:"Encargado"}),Object(n.jsx)(Ke.a,{name:"ticketLeader",control:O,rules:{required:{value:!0,message:"Campo requerido"}},defaultValue:t.team._user||"",as:Object(n.jsx)(He.a,{labelId:"demo-simple-select-outlined-label",id:"ticketLeader",value:t.team._user,error:!!b.ticketLeader,label:"Encargado",children:s.map((function(e,t){return Object(n.jsx)(H.a,{value:e._id,children:e.nombre},t)}))})}),Object(n.jsxs)(Je.a,{error:!!b.ticketLeader,children:[b.ticketLeader?b.ticketLeader.message:null," "]})]})]}),Object(n.jsxs)(v.a,{item:!0,sm:6,children:[Object(n.jsx)(m.a,{inputRef:d({required:{value:!0,message:"Campo requerido"}}),name:"start_date",id:"start_date",label:"Fecha de Inicio",type:"date",InputLabelProps:{shrink:!0},defaultValue:t.start_date.slice(0,10),error:!!b.start_date,helperText:b.start_date?b.start_date.message:null}),Object(n.jsx)(f.a,{mt:2,children:Object(n.jsx)(m.a,{inputRef:d({required:{value:!0,message:"Campo requerido"}}),name:"end_date",id:"end_date",label:"Fecha Limite",type:"date",InputLabelProps:{shrink:!0},defaultValue:t.end_date.slice(0,10),error:!!b.start_date,helperText:b.end_date?b.end_date.message:null})}),Object(n.jsx)(f.a,{children:Object(n.jsxs)(ze.a,{variant:"outlined",className:l.formControl,children:[Object(n.jsx)(Ge.a,{id:"labelPrioridad",children:"Prioridad"}),Object(n.jsx)(Ke.a,{name:"ticketPriority",control:O,rules:{required:{value:!0,message:"Campo requerido"}},defaultValue:t.priority||"",as:Object(n.jsxs)(He.a,{labelId:"demo-simple-select-outlined-label",label:"Prioridad",id:"ticketPriority",value:t.priority,error:!!b.ticketPriority,children:[Object(n.jsx)(H.a,{value:"Alta",children:"Alta"}),Object(n.jsx)(H.a,{value:"Media",children:"Media"}),Object(n.jsx)(H.a,{value:"Baja",children:"Baja"})]})}),Object(n.jsx)(Je.a,{error:!!b.ticketPriority,children:b.ticketPriority?b.ticketPriority.message:null})]})})]}),Object(n.jsx)(v.a,{item:!0,sm:12,children:Object(n.jsxs)(f.a,{display:"flex",justifyContent:"flex-end",m:1,p:1,children:[Object(n.jsx)(j.a,{color:"primary",type:"button",onClick:function(){return o()},children:"Cancelar"}),Object(n.jsx)(j.a,{color:"primary",type:"submit",children:"Guardar"})]})})]})})})},Qe=a(778),$e=a(779),et=a(781),tt=Object(C.a)((function(){return{root:{height:"100%"},avatar:function(e){return{backgroundColor:e.color,height:56,width:56}}}}));function at(e){var t=tt(e),a=e.typeTickets,r=e.totalsTickets,i=e.action,s=e.typeFilter;return Object(n.jsx)(c.a.Fragment,{children:Object(n.jsx)(Qe.a,{className:t.root,onClick:function(){return i(s)},children:Object(n.jsx)($e.a,{children:Object(n.jsx)(et.a,{children:Object(n.jsxs)(v.a,{container:!0,justify:"space-between",children:[Object(n.jsxs)(v.a,{item:!0,children:[Object(n.jsx)(y.a,{color:"textSecondary",gutterBottom:!0,variant:"subtitle2",children:a}),Object(n.jsx)(y.a,{color:"textPrimary",variant:"h3",children:r})]}),Object(n.jsx)(v.a,{item:!0,children:Object(n.jsx)(d.a,{className:t.avatar,children:Object(n.jsx)(ue.a,{})})})]})})})})})}var nt=a(786),rt=a(788),ct=function(e){var t=e.message,a=e.open,c=e.severity,i=e.setNotification,s=function(e,t){"clickaway"!==t&&i({open:!1})},l=function(e){return Object(n.jsx)(rt.a,Object(o.a)({elevation:6,variant:"filled"},e))};return Object(n.jsx)(r.Fragment,{children:Object(n.jsx)(nt.a,{open:a,autoHideDuration:3e3,onClose:s,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:Object(n.jsx)(l,{onClose:s,severity:c,children:t})})})},it=function(e){var t=Object(S.d)((function(e){return e.usuario.usuario.data._id})),a=Object(S.d)((function(e){return e.usuario.usuario.data.role})),r=c.a.useState([]),i=Object(u.a)(r,2),s=i[0],l=i[1],d=c.a.useState([]),b=Object(u.a)(d,2),m=b[0],p=b[1],O=c.a.useState([]),x=Object(u.a)(O,2),h=x[0],g=x[1],k=c.a.useState(!1),y=Object(u.a)(k,2),C=y[0],w=y[1],I=c.a.useState(""),T=Object(u.a)(I,2),D=T[0],F=T[1],P=c.a.useState([]),L=Object(u.a)(P,2),R=L[0],M=L[1],A=c.a.useState(!1),B=Object(u.a)(A,2),q=B[0],U=B[1],V=c.a.useState({open:!1,message:""}),Y=Object(u.a)(V,2),W=Y[0],z=Y[1],G=c.a.useState({institution:"",description:"",team:{_user:"",nombre:"",role:""},start_date:"",end_date:"",priority:"",status:"Sin Solucionar"}),H=Object(u.a)(G,2),J=H[0],K=H[1],X=c.a.useState(!1),Z=Object(u.a)(X,2),Q=Z[0],$=Z[1];c.a.useEffect((function(){var e=function(){var e=Object(N.a)(_.a.mark((function e(){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!0),e.prev=1,e.next=4,E.a.get("api/ticket?usuarioId=".concat(t));case 4:a=e.sent,n=a.data,p(n),M(n.data),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("ocurrio un error"),console.log(e.t0);case 14:$(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(N.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("users/users");case 3:t=e.sent,a=t.data,l(a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("ocurrio un error"),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(N.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("institutions/institutions");case 3:t=e.sent,a=t.data,g(a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("ocurrio un error"),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e(),a(),n()}),[]),c.a.useEffect((function(){console.log("El ticket a Cambiado",J)}),[J]);var ee=function(){var e=Object(N.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K(Object(o.a)(Object(o.a)({},J),{},{institution:t.ticketInstitution,description:t.ticketDescription,team:Object(o.a)(Object(o.a)({},J.team),{},{_user:t.ticketLeader,role:"Leader"}),start_date:t.start_date,end_date:t.end_date,priority:t.ticketPriority}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!0),a={institution:t.ticketInstitution,description:t.ticketDescription,team:{_user:t.ticketLeader,role:"Leader"},start_date:t.start_date,end_date:t.end_date,priority:t.ticketPriority,status:"Sin Solucionar"},e.prev=2,e.next=5,E.a.post("api/nuevo-ticket",a);case 5:n=e.sent,console.log(n.data),M([].concat(Object(Ie.a)(R),[n.data])),z(Object(o.a)(Object(o.a)({},W),{},{open:!0,message:"Ticket Creado Correctamente"})),ie(),p(Object(o.a)(Object(o.a)({},m),{},{ticketsAll:m.ticketsAll+1})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:$(!1);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],t.map((function(e){return a.push(e._id)})),console.log(m),n=window.confirm("Estas Seguro de Eliminar El/Los Registro/s"),e.prev=4,!n){e.next=14;break}return e.next=8,E.a.post("api/ticket/delete/many",a);case 8:e.sent,console.log("Nota Eliminada"),r=R.filter((function(e){return!a.includes(e._id)})),M(r),z(Object(o.a)(Object(o.a)({},W),{},{open:!0,message:"Ticket/s Eliminado/s Correctamente"})),p(Object(o.a)(Object(o.a)({},m),{},{ticketsAll:m.ticketsAll-1}));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!0),a={institution:t.ticketInstitution,description:t.ticketDescription,team:{_user:t.ticketLeader,role:"Leader"},start_date:t.start_date,end_date:t.end_date,priority:t.ticketPriority,status:t.status},console.log(a),e.prev=3,e.next=6,E.a.put("api/ticket/".concat(D),a);case 6:n=e.sent,r=R.map((function(e){return e._id===D?n.data:e})),M(r),z(Object(o.a)(Object(o.a)({},W),{},{open:!0,message:"Ticket Editado Correctamente"})),ie(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:$(!1);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),re=function(e){if("Todos"===e)M(m.data);else if("Solucionado"===e){var t=m.data.filter((function(e){return"Solucionado"===e.status}));M(t)}else if("Sin Solucionar"===e){var a=m.data.filter((function(e){return"Sin Solucionar"===e.status}));M(a)}else if("Vencidos"===e){var n=m.data.filter((function(e){return!1===e.active&&"Sin Solucionar"===e.status}));M(n)}},ce=function(){U(!1),w(!1)},ie=function(){ce(),K({institution:"",description:"",team:{_user:"",nombre:"",role:"Leader"},start_date:"",end_date:"",priority:"",status:"Sin Solucionar"}),F("")};return Object(n.jsxs)("div",{style:{maxWidth:"100%"},children:[Object(n.jsxs)(v.a,{container:!0,children:[Object(n.jsx)(ct,{message:W.message,open:W.open,severity:"success",setNotification:z}),Object(n.jsx)(v.a,{item:!0,md:3,xs:12,children:Object(n.jsx)(f.a,{children:Object(n.jsx)(at,{typeTickets:"Tickets Totales",totalsTickets:m.ticketsAll,color:"#2196f3",action:re,typeFilter:"Todos"})})}),Object(n.jsx)(v.a,{item:!0,md:3,xs:12,children:Object(n.jsx)(f.a,{ml:{md:3},mt:{xs:2,sm:2,md:0,lg:0},children:Object(n.jsx)(at,{typeTickets:"Tickets Solucionados",totalsTickets:m.ticketsSolved,color:"#4caf50",action:re,typeFilter:"Solucionado"})})}),Object(n.jsx)(v.a,{item:!0,md:3,xs:12,children:Object(n.jsx)(f.a,{ml:{md:3},mt:{xs:2,sm:2,md:0,lg:0},children:Object(n.jsx)(at,{typeTickets:"Tickets Sin Solucionar",totalsTickets:m.ticketsUnsolved,color:"#ffff70",action:re,typeFilter:"Sin Solucionar"})})}),Object(n.jsx)(v.a,{item:!0,md:3,xs:12,children:Object(n.jsx)(f.a,{ml:{md:3},mt:{xs:2,sm:2,md:0,lg:0},children:Object(n.jsx)(at,{typeTickets:"Tickets Vencidos",totalsTickets:m.ticketsExpired,color:"#ff1744",action:re,typeFilter:"Vencidos"})})})]}),Object(n.jsx)(f.a,{mt:2,children:"Admin"===a&&Object(n.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){return U(!0)},children:"Nuevo Ticket"})}),Object(n.jsxs)(f.a,{mt:2,children:[Object(n.jsx)(f.a,{display:"flex",justifyContent:"center",children:Q&&Object(n.jsx)(De.a,{})}),Object(n.jsx)(Te.a,{columns:[{title:"Id",field:"_id",hidden:!0},{title:"Institucion",field:"institution[name]"},{title:"Descripcion",field:"description"},{title:"Prioridad",field:"priority",lookup:{Alta:"Alta",Media:"Media",Baja:"Baja"}},{title:"Encargado",field:"team[0][_user][nombre]"},{title:"Fecha de Inicio",field:"start_date",type:"date",dateSetting:{locale:"es-AR"}},{title:"Vencimiento",field:"end_date",type:"date",dateSetting:{locale:"es-AR"}},{title:"Estado",field:"status",lookup:{Solucionado:"Solucionado","Sin Solucionar":"Sin Solucionar"},render:function(e){return Object(n.jsx)(Fe.a,{color:"Solucionado"===e.status?"primary":"secondary",size:"small",label:e.status})}}],data:R,actions:[{icon:function(){return Object(n.jsx)(Me.a,{})},tooltip:"Ver",position:"row",onClick:function(t,a){return e.history.push("/tickets/"+a._id)}},{hidden:"Admin"!==a,icon:"edit",tooltip:"Editar",position:"row",onClick:function(e,t){return F((a=t)._id),K(Object(o.a)(Object(o.a)({},J),{},{institution:a.institution._id,description:a.description,team:{_user:a.team[0]._user._id,nombre:a.team[0]._user.nombre,role:"Leader"},start_date:a.start_date,end_date:a.end_date,priority:a.priority,status:a.status})),w(!0),U(!0),void console.log(J);var a}},{hidden:"Admin"!==a,icon:function(){return Object(n.jsx)(Le.a,{})},position:"toolbarOnSelect",tooltip:"Borrar",onClick:function(e,t){return ae(t)}}],options:{actionsColumnIndex:-1,selection:!0,pageSize:10,filtering:!0,exportButton:!0},title:"Tickets"})]}),Object(n.jsx)(We,{title:C?"Editar Ticket":"Agregar Ticket",openPopup:q,closeForm:ce,loading:Q,children:Object(n.jsx)(Ze,{setTicket:K,ticket:J,users:s,institutions:h,addTicket:te,handleInputChange:ee,editTicket:ne,edit:C,setOpenPopup:U,emptyFields:ie})})]})},st=function(e){return Object(n.jsx)("div",{children:Object(n.jsx)(Ne,{section:"Tickets",children:Object(n.jsx)(it,{history:e.history})})})},ot=a(780),lt=a(787),ut=a(777),dt=a(775),jt=a(784),bt=a(334),mt=a.n(bt),pt=a(785),Ot=a(500),xt=a.n(Ot),ht=a(789),ft=a(400),vt=Object(C.a)({table:{minWidth:650},chatSection:{width:"100%",height:"auto"},headBG:{backgroundColor:"#e0e0e0"},borderRight500:{borderRight:"1px solid #e0e0e0"},messageArea:{height:"70vh",overflowY:"auto"}}),gt=function(e){var t=e.ticket,a=e.userId,r=e.comments,i=vt(),s=Object(S.d)((function(e){return e.usuario.usuario.data._id})),l=c.a.useState({open:!1,message:"",severity:""}),b=Object(u.a)(l,2),p=b[0],O=b[1],x=c.a.useState(r),g=Object(u.a)(x,2),k=g[0],y=g[1];c.a.useEffect((function(){console.log(k)}),[k]);var C=c.a.useState({ticketId:t._id,userId:a,comment:""}),w=Object(u.a)(C,2),I=w[0],T=w[1],D=function(){var e=Object(N.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.post("api/ticket/comment",I);case 3:t=e.sent,y(t.data.comments),T(Object(o.a)(Object(o.a)({},I),{},{comment:""})),O(Object(o.a)(Object(o.a)({},p),{},{open:!0,message:"Mensaje Enviado Correctamente",severity:"success"})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(N.a)(_.a.mark((function e(a){var n,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,e.prev=1,e.next=4,E.a.delete("api/ticket/comment/deleteComment?ticketId=".concat(n,"&commentId=").concat(a));case 4:r=k.filter((function(e){return e._id!==a})),y(r),O(Object(o.a)(Object(o.a)({},p),{},{open:!0,message:"Mensaje Eliminado Correctamente",severity:"error"})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{children:Object(n.jsxs)(v.a,{container:!0,component:h.a,className:i.chatSection,children:[Object(n.jsx)(ct,{message:p.message,open:p.open,severity:p.severity,setNotification:O}),Object(n.jsxs)(v.a,{item:!0,xs:12,className:i.borderRight500,children:[Object(n.jsx)(v.a,{item:!0,xs:12,style:{padding:"10px"},children:Object(n.jsx)(m.a,{id:"outlined-basic-email",label:"Mensaje",variant:"outlined",value:I.comment,onKeyPress:function(e){"Enter"===e.key&&D()},onChange:function(e){return T(Object(o.a)(Object(o.a)({},I),{},{comment:e.target.value}))},fullWidth:!0})}),Object(n.jsx)(f.a,{ml:1,children:Object(n.jsx)(j.a,{variant:"contained",color:"primary",className:i.button,endIcon:Object(n.jsx)(ft.a,{children:"send"}),onClick:function(){return D()},children:"Enviar"})}),k.map((function(e){return Object(n.jsxs)(f.a,{mt:2,children:[Object(n.jsx)($.a,{}),Object(n.jsx)(ee.a,{children:Object(n.jsxs)(ne.a,{button:!0,children:[Object(n.jsx)(re.a,{children:Object(n.jsx)(d.a,{alt:"Remy Sharp",src:"https://material-ui.com/static/images/avatar/1.jpg"})}),Object(n.jsx)(ce.a,{primary:e._user.nombre,secondary:e.comment}),s===e._user._id?Object(n.jsx)(pt.a,{children:Object(n.jsx)(Y.a,{edge:"start","aria-label":"delete",onClick:function(){return F(e._id)},children:Object(n.jsx)(Le.a,{})})}):""]},e._user.nombre)}),Object(n.jsx)($.a,{})]})}))]})]})})},kt=a(25),yt=a.n(kt);function Ct(e){var t=e.children,a=e.value,r=e.index,c=Object(l.a)(e,["children","value","index"]);return Object(n.jsx)("div",Object(o.a)(Object(o.a)({role:"tabpanel",hidden:a!==r,id:"scrollable-auto-tabpanel-".concat(r),"aria-labelledby":"scrollable-auto-tab-".concat(r)},c),{},{children:a===r&&Object(n.jsx)(f.a,{p:3,children:Object(n.jsx)(y.a,{children:t})})}))}function St(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}}var wt=Object(C.a)((function(e){return{root:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper},container:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),minWidth:400}}}));function _t(e){var t,a=e.ticket,i=e.setTicket,s=e.responsible,l=e.setResponsible,b=e.usuarioId,p=e.comments,O=e.users,x=e.institution,h=wt(),g=Object(Ke.b)(),k=(g.register,g.errors),C=g.handleSubmit,S=g.control,w=c.a.useState({open:!1,message:"",severity:""}),I=Object(u.a)(w,2),T=I[0],D=I[1],F=c.a.useState(0),P=Object(u.a)(F,2),L=P[0],R=P[1],M=c.a.useState([]),A=Object(u.a)(M,2),B=A[0],q=A[1],V=c.a.useState([]),W=Object(u.a)(V,2),z=W[0],G=W[1];c.a.useEffect((function(){!function(){var e=[];s.map((function(t){return e.push(t._user._id)}));var t=O.filter((function(t){return!e.includes(t._id)}));G(t)}()}),[s]);var H=c.a.useState(!1),J=Object(u.a)(H,2),K=J[0],X=J[1];var Q=function(){X(!0),console.log(z)},$=function(){X(!1)},te=function(){var e=Object(N.a)(_.a.mark((function e(){var t,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={ticketId:a._id,members:B},e.prev=1,e.next=4,E.a.post("api/ticket/team/addMembersTeam",t);case 4:n=e.sent,$(),l(n.data.team),D(Object(o.a)(Object(o.a)({},T),{},{open:!0,message:"Miembro/s Agregados Correctamente",severity:"success"})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(N.a)(_.a.mark((function e(t){var n,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a._id,e.prev=1,e.next=4,E.a.delete("api/ticket/team/deleteMembersTeam?ticketId=".concat(n,"&userId=").concat(t));case 4:r=e.sent,s.filter((function(e){return e._user._id!==t})),l(r.data.team),D(Object(o.a)(Object(o.a)({},T),{},{open:!0,message:"Miembro Eliminado Correctamente",severity:"error"})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(N.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={ticketId:a._id,solution:t.ticketSolution},e.prev=1,e.next=4,E.a.post("api/ticket/solution/change",n);case 4:$(),D(Object(o.a)(Object(o.a)({},T),{},{open:!0,message:"Situacion del Ticket Informada",severity:"success"})),i(Object(o.a)(Object(o.a)({},a),{},{solution:n.solution})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:h.root,children:[Object(n.jsx)(ct,{message:T.message,open:T.open,severity:T.severity,setNotification:D}),Object(n.jsx)(U.a,{position:"static",color:"default",children:Object(n.jsxs)(lt.a,{value:L,onChange:function(e,t){R(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth",scrollButtons:"auto","aria-label":"scrollable auto tabs example",children:[Object(n.jsx)(ut.a,Object(o.a)({label:"Detalles"},St(0))),Object(n.jsx)(ut.a,Object(o.a)({label:"Equipo"},St(1))),Object(n.jsx)(ut.a,Object(o.a)({label:"Mensajes"},St(2)))]})}),Object(n.jsx)(Ct,{value:L,index:0,children:Object(n.jsxs)(v.a,{container:!0,children:[Object(n.jsxs)(v.a,{item:!0,xs:12,children:[Object(n.jsxs)(f.a,{display:"flex",justifyContent:"flex-end",children:[s.map((function(e){return"Leader"===e.role&&e._user._id===b&&""===a.solution?Object(n.jsx)(j.a,{onClick:Q,children:"Cambiar Estado Ticket"}):""})),""!==a.solution&&"Sin Solucionar"===a.status&&Object(n.jsx)(Fe.a,{label:"Ticket Pendiente de Autorizacion",variant:"outlined",color:"primary"}),"Solucionado"===a.status&&Object(n.jsx)(Fe.a,{label:"Ticket Resuelto",variant:"outlined",icon:Object(n.jsx)(xt.a,{}),color:"default",style:{backgroundColor:"#8bc34a"}})]}),Object(n.jsx)(f.a,{children:Object(n.jsxs)(Ae.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,open:K,onClose:$,children:[Object(n.jsx)(Be.a,{children:"Finalizar Ticket"}),Object(n.jsx)(qe.a,{children:Object(n.jsx)("form",(t={onSubmit:C(re),className:h.root},Object(Z.a)(t,"className",h.container),Object(Z.a)(t,"children",Object(n.jsx)(ze.a,{className:h.formControl,children:Object(n.jsx)(Ke.a,{rules:{required:{value:!0,message:"Campo requerido"},minLength:{value:6,message:"M\xednimo 6 car\xe1cteres"}},control:S,name:"ticketSolution",id:"ticketSolution",label:"Que se Hizo",variant:"outlined",defaultValue:"",as:Object(n.jsx)(m.a,{error:!!k.ticketSolution,helperText:k.ticketSolution?k.ticketSolution.message:null})})})),t))}),Object(n.jsxs)(dt.a,{children:[Object(n.jsx)(j.a,{onClick:$,color:"primary",children:"Cancelar"}),Object(n.jsx)(j.a,{onClick:C(re),color:"primary",children:"Ok"})]})]})})]}),Object(n.jsx)(v.a,{item:!0,xs:12,md:6,children:Object(n.jsxs)(f.a,{children:[Object(n.jsx)(y.a,{variant:"h6",gutterBottom:!0,children:"Institucion"}),Object(n.jsx)(y.a,{variant:"body2",gutterBottom:!0,children:x.name}),Object(n.jsx)(y.a,{variant:"h6",gutterBottom:!0,children:"Descripcion"}),Object(n.jsx)(y.a,{variant:"body2",gutterBottom:!0,children:a.description})]})}),Object(n.jsx)(v.a,{item:!0,xs:12,md:6,children:Object(n.jsxs)(f.a,{children:[Object(n.jsx)(y.a,{variant:"h6",gutterBottom:!0,children:"Fechas"}),Object(n.jsxs)(y.a,{variant:"body2",gutterBottom:!0,children:["Fecha Inicio: ",yt()(a.start_date,"YYYY-MM-DD").format("DD-MM-YYYY")]}),Object(n.jsxs)(y.a,{variant:"body2",gutterBottom:!0,children:["Fecha Vencimiento: ",yt()(a.end_date,"YYYY-MM-DD").format("DD-MM-YYYY")]})]})})]})}),Object(n.jsxs)(Ct,{value:L,index:1,children:[Object(n.jsx)(v.a,{container:!0,children:Object(n.jsx)(v.a,{md:12,children:Object(n.jsxs)(f.a,{display:"flex",justifyContent:"flex-end",children:[s.map((function(e){return"Leader"===e.role&&e._user._id===b&&""===a.solution?Object(n.jsx)(j.a,{onClick:Q,children:"Agregar al Equipo"}):""})),Object(n.jsxs)(Ae.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,open:K,onClose:$,children:[Object(n.jsx)(Be.a,{children:"Agregar Integrantes"}),Object(n.jsx)(qe.a,{children:Object(n.jsx)("form",{className:h.container,children:Object(n.jsx)(ze.a,{className:h.formControl,children:Object(n.jsx)(ht.a,{multiple:!0,id:"tags-standard",options:z,getOptionLabel:function(e){return e.nombre},onChange:function(e,t){q(t)},renderInput:function(e){return Object(n.jsx)(m.a,Object(o.a)(Object(o.a)({},e),{},{variant:"standard",label:"Integrantes",placeholder:"Usuarios"}))}})})})}),Object(n.jsxs)(dt.a,{children:[Object(n.jsx)(j.a,{onClick:$,color:"primary",children:"Cancelar"}),Object(n.jsx)(j.a,{onClick:te,color:"primary",children:"Ok"})]})]})]})})}),Object(n.jsxs)(v.a,{container:!0,spacing:-2,children:[Object(n.jsx)(v.a,{md:6,children:Object(n.jsxs)(f.a,{children:[Object(n.jsx)(y.a,{variant:"h6",gutterBottom:!0,children:"Encargado:"}),Object(n.jsx)(ee.a,{dense:!0,children:s.map((function(e){return"Leader"===e.role?Object(n.jsx)(r.Fragment,{children:Object(n.jsxs)(ne.a,{children:[Object(n.jsx)(jt.a,{children:Object(n.jsx)(d.a,{children:Object(n.jsx)(mt.a,{})})}),Object(n.jsx)(ce.a,{primary:e._user.nombre,secondary:null})]})}):""}))})]})}),Object(n.jsx)(v.a,{md:6,children:Object(n.jsxs)(f.a,{children:[Object(n.jsx)(y.a,{variant:"h6",gutterBottom:!0,children:"Equipo de Soporte:"}),Object(n.jsx)(ee.a,{dense:!0,children:s.map((function(e){return"Support"===e.role?Object(n.jsx)(r.Fragment,{children:Object(n.jsxs)(ne.a,{children:[Object(n.jsx)(jt.a,{children:Object(n.jsx)(d.a,{children:Object(n.jsx)(mt.a,{})})}),Object(n.jsx)(ce.a,{primary:e._user.nombre,secondary:null}),a.team[0]._user._id===b&&Object(n.jsx)(pt.a,{children:Object(n.jsx)(Y.a,{edge:"start","aria-label":"delete",onClick:function(){return ae(e._user._id)},children:Object(n.jsx)(Le.a,{})})})]})}):""}))})]})})]})]}),Object(n.jsx)(Ct,{value:L,index:2,children:Object(n.jsx)(gt,{ticket:a,userId:b,comments:p})})]})}var Nt=Object(C.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),It=function(){var e=Nt(),t=Object(S.d)((function(e){return e.usuario.usuario.data._id})),a=c.a.useState([]),r=Object(u.a)(a,2),i=r[0],s=r[1],o=c.a.useState({}),l=Object(u.a)(o,2),d=l[0],j=l[1],b=c.a.useState([]),m=Object(u.a)(b,2),p=m[0],O=m[1],x=c.a.useState([]),h=Object(u.a)(x,2),f=h[0],v=h[1],g=c.a.useState([]),k=Object(u.a)(g,2),y=k[0],C=k[1],w=Object(L.g)().id,I=c.a.useState(w),T=Object(u.a)(I,2),D=T[0];T[1];return c.a.useEffect((function(){var e=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("api/ticket/".concat(t));case 3:a=e.sent,n=a.data,j(n),O(n.team),C(n.comments),v(n.institution),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=Object(N.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("users/users");case 3:t=e.sent,a=t.data,s(a),console.log(i),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("ocurrio un error"),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e(D),t()}),[]),Object(n.jsx)(c.a.Fragment,{children:Object(n.jsxs)(Qe.a,{className:e.root,children:[Object(n.jsx)(et.a,{children:Object(n.jsx)(_t,{ticket:d,setTicket:j,responsible:p,setResponsible:O,usuarioId:t,comments:y,users:i,institution:f})}),Object(n.jsx)(ot.a,{})]})})},Et=function(){return Object(n.jsx)("div",{children:Object(n.jsx)(Ne,{section:"Detalles del Ticket",children:Object(n.jsx)(It,{})})})},Tt=a(507),Dt=a(335),Ft=a(501),Pt=a(502),Lt=a.n(Pt),Rt=function(){var e=Object(S.d)((function(e){return e.usuario.usuario.data._id})),t=Object(r.useState)([]),a=Object(u.a)(t,2),i=a[0],s=a[1],o=Object(r.useState)([]),l=Object(u.a)(o,2),d=l[0],j=l[1];return c.a.useEffect((function(){(function(){var t=Object(N.a)(_.a.mark((function t(){var a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.get("api/ticket?usuarioId=".concat(e));case 3:a=t.sent,s(a.data.data),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ocurrio un error"),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[]),c.a.useEffect((function(){i.map((function(e){return"Sin Solucionar"===e.status&&j((function(t){return[].concat(Object(Ie.a)(t),[{title:e.name,start:e.start_date,end:e.end_date,url:"/tickets/".concat(e._id),backgroundColor:e.active?"#165CFF":"#FF2416",borderColor:!1===e.active&&"#FF2416"}])}))}))}),[i]),Object(n.jsx)(r.Fragment,{children:Object(n.jsx)(Tt.a,{plugins:[Dt.a,Ft.a,Dt.a],headerToolbar:{center:"dayGridWeek dayGridMonth listWeek"},initialView:"dayGridMonth",locale:Lt.a,events:d})})},Mt=function(){return Object(n.jsx)(Ne,{section:"Calendario de Tareas",children:Object(n.jsx)(Rt,{})})},At=a(782),Bt=Object(C.a)({root:{maxWidth:345},media:{height:140}}),qt=function(){var e=Bt(),t=(Object(S.d)((function(e){return e.usuario.usuario.data._id})),c.a.useState({open:!1,message:"",severity:""})),a=Object(u.a)(t,2),r=a[0],i=a[1],s=c.a.useState([]),l=Object(u.a)(s,2),d=l[0],b=l[1],m={headers:{token:Object(S.d)((function(e){return e.usuario.token}))}};c.a.useEffect((function(){(function(){var e=Object(N.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("api/ticket/solution/pending",m);case 3:t=e.sent,a=t.data,b(a.data),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("ocurrio un error"),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var p=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={ticketId:t},e.prev=1,e.next=4,E.a.post("api/ticket/solution/aprobed",a,m);case 4:e.sent,i(Object(o.a)(Object(o.a)({},r),{},{open:!0,message:"Ticket Marcado como Solucionado",severity:"success"})),n=d.filter((function(e){return e._id!==t})),b(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{children:[Object(n.jsx)(ct,{message:r.message,open:r.open,severity:r.severity,setNotification:i}),Object(n.jsx)(v.a,{container:!0,spacing:1,children:d.map((function(t){return Object(n.jsx)(v.a,{item:!0,md:4,xs:12,sm:6,children:Object(n.jsxs)(Qe.a,{className:e.root,children:[Object(n.jsxs)($e.a,{children:[Object(n.jsx)(At.a,{className:e.media,image:"",title:"Contemplative Reptile"}),Object(n.jsxs)(et.a,{children:[Object(n.jsx)(y.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.name}),Object(n.jsx)(y.a,{variant:"body2",color:"textSecondary",component:"p",children:t.solution})]})]}),Object(n.jsxs)(ot.a,{children:[Object(n.jsx)(j.a,{size:"small",color:"primary",href:"/tickets/".concat(t._id),children:"Ver Ticket"}),Object(n.jsx)(j.a,{size:"small",color:"primary",onClick:function(){return p(t._id)},children:"Solucionado"})]})]})})}))})]})},Ut=function(){return Object(n.jsx)("div",{children:Object(n.jsx)(Ne,{section:"Tickets Pendientes de Aprobacion",children:Object(n.jsx)(qt,{})})})},Vt=Object(C.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}},formControl:{margin:e.spacing(1),minWidth:"25ch"}}})),Yt=function(e){var t=e.user,a=e.addUser,c=e.editUser,i=e.edit,s=e.emptyFields,o=Vt(),l=Object(Ke.b)(),d=(l.register,l.errors),b=l.handleSubmit,x=l.control,h=(0,l.watch)("userPassword"),g=Object(r.useState)((function(){return!i})),k=Object(u.a)(g,2),y=k[0],C=k[1];return Object(n.jsx)("div",{children:Object(n.jsx)("form",{onSubmit:b(i?c:a),className:o.root,children:Object(n.jsxs)(v.a,{container:!0,children:[Object(n.jsxs)(v.a,{item:!0,sm:6,children:[Object(n.jsx)(Ke.a,{rules:{required:{value:!0,message:"Campo requerido"},minLength:{value:6,message:"M\xednimo 6 car\xe1cteres"}},control:x,name:"userName",id:"userName",label:"Nombre",variant:"outlined",defaultValue:t.name||"",as:Object(n.jsx)(m.a,{error:!!d.userName,helperText:d.userName?d.userName.message:null})}),Object(n.jsx)(Ke.a,{rules:{required:{value:!0,message:"Campo requerido"},minLength:{value:6,message:"M\xednimo 6 car\xe1cteres"}},control:x,name:"userLastName",id:"userLastName",label:"Apellido",variant:"outlined",defaultValue:t.lastName||"",as:Object(n.jsx)(m.a,{error:!!d.userLastName,helperText:d.userLastName?d.userLastName.message:null})}),Object(n.jsx)(f.a,{children:Object(n.jsxs)(ze.a,{variant:"outlined",className:o.formControl,children:[Object(n.jsx)(Ge.a,{id:"labelPrioridad",children:"Rol"}),Object(n.jsx)(Ke.a,{name:"userRole",control:x,rules:{required:{value:!0,message:"Campo requerido"}},defaultValue:t.role||"",as:Object(n.jsxs)(He.a,{labelId:"demo-simple-select-outlined-label",label:"Prioridad",id:"ticketPriority",value:t.role,error:!!d.userRole,children:[Object(n.jsx)(H.a,{value:"User",children:"Usuario"}),Object(n.jsx)(H.a,{value:"Admin",children:"Admin"})]})}),Object(n.jsx)(Je.a,{error:!!d.userRole,children:d.userRole?d.userRole.message:null})]})})]}),Object(n.jsxs)(v.a,{sm:6,children:[Object(n.jsx)(Ke.a,{rules:{required:{value:!0,message:"Campo requerido"},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Email con Formato Invalido"}},control:x,name:"userEmail",type:"email",id:"userEmail",label:"Email",variant:"outlined",defaultValue:t.email||"",as:Object(n.jsx)(m.a,{error:!!d.userEmail,helperText:d.userEmail?d.userEmail.message:null})}),Object(n.jsx)(Ke.a,{rules:{required:{value:!!y,message:"Campo requerido"},minLength:{value:6,message:"La Contrase\xf1a Tiene que Tener al Menos 6 Caracteres"}},control:x,name:"userPassword",type:"password",id:"userPassword",label:"Contrase\xf1a",variant:"outlined",defaultValue:"",disabled:!y,as:Object(n.jsx)(m.a,{error:!!d.userPassword,helperText:d.userPassword?d.userPassword.message:null})}),Object(n.jsx)(Ke.a,{rules:{required:{value:!!y,message:"Campo requerido"},validate:function(e){return e===h||!y||"Las contrase\xf1as no Coinciden"}},control:x,name:"userPasswordRepeat",type:"password",id:"userPasswordRepeat",label:"Repetir Contrase\xf1a",variant:"outlined",defaultValue:"",disabled:!y,as:Object(n.jsx)(m.a,{error:!!d.userPasswordRepeat,helperText:d.userPasswordRepeat?d.userPasswordRepeat.message:null})})]}),Object(n.jsx)(v.a,{sm:12,children:i&&Object(n.jsx)(p.a,{control:Object(n.jsx)(O.a,{checked:y,onChange:function(e){C(e.target.checked)},color:"primary"}),label:"Desea Cambiar la Contrase\xf1a"})}),Object(n.jsx)(v.a,{item:!0,sm:12,children:Object(n.jsxs)(f.a,{display:"flex",justifyContent:"flex-end",m:1,p:1,children:[Object(n.jsx)(j.a,{color:"primary",type:"button",onClick:function(){return s()},children:"Cancelar"}),Object(n.jsx)(j.a,{color:"primary",type:"submit",children:"Guardar"})]})})]})})})},Wt=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),a=t[0],i=t[1],s=c.a.useState({open:!1,message:""}),l=Object(u.a)(s,2),d=l[0],b=l[1],m=Object(r.useState)({name:"",lastName:"",role:"",email:""}),p=Object(u.a)(m,2),O=p[0],x=p[1],h=Object(r.useState)([]),g=Object(u.a)(h,2),k=g[0],y=g[1],C=Object(r.useState)(!1),S=Object(u.a)(C,2),w=S[0],I=S[1],T=Object(r.useState)(""),D=Object(u.a)(T,2),F=D[0],P=D[1];Object(r.useEffect)((function(){(function(){var e=Object(N.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("users/users");case 2:t=e.sent,y(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var L=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:t.userName,lastName:t.userLastName,email:t.userEmail,password:t.userPassword,role:t.userRole},e.prev=1,e.next=4,E.a.post("users/users",a);case 4:n=e.sent,y([].concat(Object(Ie.a)(k),[n.data])),b(Object(o.a)(Object(o.a)({},d),{},{open:!0,message:"Usuario Creado Correctamente"})),B(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:t.userName,lastName:t.userLastName,email:t.userEmail,password:t.userPassword,role:t.userRole},e.prev=1,e.next=4,E.a.put("users/users/".concat(F),a);case 4:n=e.sent,r=k.map((function(e){return e._id===F?n.data:e})),console.log(n.data),y(r),b(Object(o.a)(Object(o.a)({},d),{},{open:!0,message:"Usuario Editado Correctamente"})),B(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],t.map((function(e){return a.push(e._id)})),n=window.confirm("Estas Seguro de Eliminar El/Los Registro/s"),e.prev=3,!n){e.next=11;break}return e.next=7,E.a.post("users/users/delete/many",a);case 7:e.sent,r=k.filter((function(e){return!a.includes(e._id)})),y(r),b(Object(o.a)(Object(o.a)({},d),{},{open:!0,message:"Usuario/s Eliminado/s Correctamente"}));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){i(!1),I(!1)},B=function(){A(),x({name:"",lastName:"",role:"",email:""}),P("")};return Object(n.jsxs)(r.Fragment,{children:[Object(n.jsxs)(v.a,{container:!0,spacing:1,children:[Object(n.jsx)(v.a,{item:!0,sm:12,children:Object(n.jsx)(f.a,{children:Object(n.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){return i(!0)},children:"Nuevo Usuario"})})}),Object(n.jsx)(v.a,{item:!0,sm:12,children:Object(n.jsx)(f.a,{mt:2,children:Object(n.jsx)(Te.a,{columns:[{title:"Id",field:"_id",hidden:!0},{title:"Nombre",field:"nombre"},{title:"Apellido",field:"lastName"},{title:"role",field:"role"},{title:"email",field:"email"}],data:k,actions:[{icon:"edit",tooltip:"Editar",position:"row",onClick:function(e,t){return P((a=t)._id),x({name:a.nombre,lastName:a.lastName,email:a.email,role:a.role}),I(!0),i(!0),void console.log(O);var a}},{icon:function(){return Object(n.jsx)(Le.a,{})},position:"toolbarOnSelect",tooltip:"Borrar",onClick:function(e,t){return M(t)}}],options:{actionsColumnIndex:-1,selection:!0,pageSize:10},title:"Usuarios"})})})]}),Object(n.jsx)(ct,{message:d.message,open:d.open,severity:"success",setNotification:b}),Object(n.jsx)(We,{openPopup:a,title:w?"Editar Usuario":"Agregar Usuario",closeForm:A,children:Object(n.jsx)(Yt,{edit:w,user:O,addUser:L,editUser:R,emptyFields:B})})]})},zt=function(){return Object(n.jsx)("div",{children:Object(n.jsx)(Ne,{section:"Usuarios",children:Object(n.jsx)(Wt,{})})})},Gt=Object(C.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}},formControl:{margin:e.spacing(1),minWidth:"25ch"}}})),Ht=function(e){var t=e.institution,a=e.addInstitution,r=e.editInstitution,c=e.edit,i=e.emptyFields,s=Gt(),o=Object(Ke.b)(),l=(o.register,o.errors),u=o.handleSubmit,d=o.control;o.watch;return Object(n.jsx)("div",{children:Object(n.jsx)("form",{onSubmit:u(c?r:a),className:s.root,children:Object(n.jsxs)(v.a,{container:!0,children:[Object(n.jsxs)(v.a,{item:!0,sm:12,children:[Object(n.jsx)(Ke.a,{rules:{required:{value:!0,message:"Campo requerido"},minLength:{value:6,message:"M\xednimo 6 car\xe1cteres"}},control:d,name:"institutionName",id:"institutionName",label:"Nombre",variant:"outlined",defaultValue:t.name||"",as:Object(n.jsx)(m.a,{error:!!l.institutionName,helperText:l.institutionName?l.institutionName.message:null})}),Object(n.jsx)(Ke.a,{rules:{},control:d,name:"institutionAddres",id:"institutionAddres",label:"Direccion",variant:"outlined",defaultValue:t.addres||"",type:"text",as:Object(n.jsx)(m.a,{error:!!l.institutionAddres,helperText:l.institutionAddres?l.institutionAddres.message:null})}),Object(n.jsx)(Ke.a,{rules:{},control:d,name:"institutionCue",id:"institutionCue",label:"CUE",variant:"outlined",defaultValue:t.cue||"",type:"number",as:Object(n.jsx)(m.a,{error:!!l.institutionCue,helperText:l.institutionCue?l.institutionCue.message:null})})]}),Object(n.jsx)(v.a,{item:!0,sm:12,children:Object(n.jsxs)(f.a,{display:"flex",justifyContent:"flex-end",m:1,p:1,children:[Object(n.jsx)(j.a,{color:"primary",type:"button",onClick:function(){return i()},children:"Cancelar"}),Object(n.jsx)(j.a,{color:"primary",type:"submit",children:"Guardar"})]})})]})})})},Jt=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),a=t[0],i=t[1],s=c.a.useState({open:!1,message:""}),l=Object(u.a)(s,2),d=l[0],b=l[1],m=Object(r.useState)({name:"",addres:"",cue:""}),p=Object(u.a)(m,2),O=p[0],x=p[1],h=Object(r.useState)([]),g=Object(u.a)(h,2),k=g[0],y=g[1],C=Object(r.useState)(!1),S=Object(u.a)(C,2),w=S[0],I=S[1],T=Object(r.useState)(""),D=Object(u.a)(T,2),F=D[0],P=D[1];Object(r.useEffect)((function(){(function(){var e=Object(N.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("institutions/institutions");case 2:t=e.sent,y(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var L=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:t.institutionName,addres:t.institutionAddres,cue:t.institutionCue},e.prev=1,e.next=4,E.a.post("institutions/institutions",a);case 4:n=e.sent,y([].concat(Object(Ie.a)(k),[n.data])),b(Object(o.a)(Object(o.a)({},d),{},{open:!0,message:"Institucion Creada Correctamente"})),B(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:t.institutionName,addres:t.institutioAddres,CUE:t.institutioCUE},e.prev=1,e.next=4,E.a.put("institutions/institutions/".concat(F),a);case 4:n=e.sent,r=k.map((function(e){return e._id===F?n.data:e})),y(r),b(Object(o.a)(Object(o.a)({},d),{},{open:!0,message:"Institucion Editada Correctamente"})),B(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],t.map((function(e){return a.push(e._id)})),n=window.confirm("Estas Seguro de Eliminar El/Los Registro/s"),e.prev=3,!n){e.next=11;break}return e.next=7,E.a.post("institutions/institutions/delete/many",a);case 7:e.sent,r=k.filter((function(e){return!a.includes(e._id)})),y(r),b(Object(o.a)(Object(o.a)({},d),{},{open:!0,message:"Intitucion/es Eliminada/s Correctamente"}));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){i(!1),I(!1)},B=function(){A(),x({name:"",addres:"",cue:""}),P("")};return Object(n.jsxs)(r.Fragment,{children:[Object(n.jsxs)(v.a,{container:!0,spacing:1,children:[Object(n.jsx)(v.a,{item:!0,sm:12,children:Object(n.jsx)(f.a,{children:Object(n.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){return i(!0)},children:"Nueva Institucion"})})}),Object(n.jsx)(v.a,{item:!0,sm:12,children:Object(n.jsx)(f.a,{mt:2,children:Object(n.jsx)(Te.a,{columns:[{title:"Id",field:"_id",hidden:!0},{title:"Nombre",field:"name"},{title:"Direccion",field:"addres"},{title:"CUE",field:"cue"}],data:k,actions:[{icon:"edit",tooltip:"Editar",position:"row",onClick:function(e,t){return P((a=t)._id),x({name:a.name,addres:a.addres,cue:a.cue}),I(!0),void i(!0);var a}},{icon:function(){return Object(n.jsx)(Le.a,{})},position:"toolbarOnSelect",tooltip:"Borrar",onClick:function(e,t){return M(t)}}],options:{actionsColumnIndex:-1,selection:!0,pageSize:10},title:"Instituciones"})})})]}),Object(n.jsx)(ct,{message:d.message,open:d.open,severity:"success",setNotification:b}),Object(n.jsx)(We,{openPopup:a,title:w?"Editar Institucion":"Agregar Institucion",closeForm:A,children:Object(n.jsx)(Ht,{edit:w,institution:O,addInstitution:L,editInstitution:R,emptyFields:B})})]})},Kt=function(){return Object(n.jsx)("div",{children:Object(n.jsx)(Ne,{section:"Instituciones",children:Object(n.jsx)(Jt,{})})})},Xt=a(505),Zt=a.n(Xt),Qt=(a(620),a(503)),$t=(a(733),a(504)),ea=a.n($t),ta=a(110),aa=a(8),na=a(37),ra=Object(aa.a)((function(){return{root:{display:"flex",margin:"auto",flexDirection:"row"}}}),{name:"LegendRoot"})((function(e){var t=e.classes,a=Object(l.a)(e,["classes"]);return Object(n.jsx)(ta.d.Root,Object(o.a)(Object(o.a)({},a),{},{className:t.root}))})),ca=Object(aa.a)((function(){return{label:{whiteSpace:"nowrap"}}}),{name:"LegendLabel"})((function(e){var t=e.classes,a=Object(l.a)(e,["classes"]);return Object(n.jsx)(ta.d.Label,Object(o.a)({className:t.label},a))})),ia=Object(C.a)((function(e){return{button:{margin:e.spacing(1)}}})),sa=function(e){yt.a.locale("es",ea.a);var t=ia(),a=Object(S.d)((function(e){return e.usuario.usuario.data._id})),c=Object(S.d)((function(e){return e.usuario.role})),i=Object(S.d)((function(e){return e.usuario.usuario.data.nombre})),s=Object(r.useState)(yt()()),o=Object(u.a)(s,2),l=o[0],d=o[1],b=Object(r.useState)(yt()()),m=Object(u.a)(b,2),p=m[0],O=m[1],x=Object(r.useState)(null),g=Object(u.a)(x,2),k=g[0],y=g[1],C=Object(r.useState)([]),w=Object(u.a)(C,2),I=w[0],T=w[1],D=Object(r.useState)([]),F=Object(u.a)(D,2),P=F[0],L=F[1];Object(r.useEffect)((function(){L([]),R()}),[l,p]),Object(r.useEffect)((function(){I.map((function(e){return L((function(t){return[].concat(Object(Ie.a)(t),[{mes:"".concat(yt.a.months(e._id.mes-1)," - ").concat(e._id.anio," "),solucionado:e.solucionado,noSolucionado:e.noSolucionado}])}))}))}),[I]);var R=function(){var e=Object(N.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("api/range-date?usuarioId=".concat(a,"&startDate=").concat(l,"&endDate=").concat(p,"&role=").concat(c));case 3:t=e.sent,T(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(N.a)(_.a.mark((function e(){var t,a,n,r,c,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.reduce((function(e,t){return e+t.noSolucionado}),0),a=I.reduce((function(e,t){return e+t.solucionado}),0),n={noSolucionado:t,solucionado:a,total:t+a,userName:i,startDate:l._d,endDate:p._d},console.log(t),e.prev=5,e.next=8,E.a.post("api/pdf",n,{responseType:"blob"});case 8:r=e.sent,c=new Blob([r.data],{type:"application/pdf"}),s=URL.createObjectURL(c),window.open(s),console.log(c),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(r.Fragment,{children:Object(n.jsxs)(v.a,{container:!0,children:[Object(n.jsx)(v.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{display:"flex",justifyContent:"flex-start",children:Object(n.jsx)(Qt.DateRangePicker,{startDate:l,startDateId:"s_id",endDate:p,endDateId:"e_id",onDatesChange:function(e){var t=e.startDate,a=e.endDate;d(t),O(a)},focusedInput:k,onFocusChange:function(e){return y(e)},displayFormat:"DD/MM/YYYY",isOutsideRange:function(){return!1},withPortal:!0})})}),Object(n.jsx)(v.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{display:"flex",justifyContent:"flex-end",children:Object(n.jsx)(j.a,{variant:"contained",color:"default",className:t.button,startIcon:Object(n.jsx)(Zt.a,{}),onClick:function(){return M()},children:"Generar Informe"})})}),Object(n.jsx)(v.a,{item:!0,xs:12,children:Object(n.jsx)(f.a,{mt:2,children:Object(n.jsx)(h.a,{children:Object(n.jsxs)(ta.c,{data:P,children:[Object(n.jsx)(ta.a,{}),Object(n.jsx)(ta.f,{}),Object(n.jsx)(ta.b,{name:"Solucionado",valueField:"solucionado",argumentField:"mes",color:"#0FFF04"}),Object(n.jsx)(ta.b,{name:"No Solucionado",valueField:"noSolucionado",argumentField:"mes",color:"#FF0404"}),Object(n.jsx)(na.a,{}),Object(n.jsx)(ta.d,{position:"bottom",rootComponent:ra,labelComponent:ca}),Object(n.jsx)(ta.e,{text:"Situacion Tickets"}),Object(n.jsx)(na.i,{})]})})})})]})})},oa=function(){return Object(n.jsx)(Ne,{section:"Reportes Detallados",children:Object(n.jsx)(sa,{})})};var la=function(){var e=function(e){var t=e.component,a=e.path,r=Object(l.a)(e,["component","path"]);return Object(S.d)((function(e){return e.usuario.token}))?Object(n.jsx)(L.b,Object(o.a)({component:t,path:a},r)):Object(n.jsx)(L.a,Object(o.a)({to:"/"},r))},t=function(e){var t=e.component,a=e.path,r=Object(l.a)(e,["component","path"]);return"Admin"===Object(S.d)((function(e){return e.usuario.role}))?Object(n.jsx)(L.b,Object(o.a)({component:t,path:a},r)):Object(n.jsx)(L.a,Object(o.a)({to:"/"},r))};return Object(n.jsx)(ge.a,{children:Object(n.jsxs)(L.d,{children:[Object(n.jsx)(L.b,{component:A,path:"/",exact:!0}),Object(n.jsx)(e,{component:Ne,path:"/dashboard",exact:!0}),Object(n.jsx)(e,{component:st,path:"/tickets",exact:!0}),Object(n.jsx)(e,{component:Et,path:"/tickets/:id",exact:!0}),Object(n.jsx)(e,{component:Mt,path:"/calendar",exact:!0}),Object(n.jsx)(e,{component:oa,path:"/reportes",exact:!0}),Object(n.jsx)(t,{component:Ut,path:"/admin/pendientes",exact:!0}),Object(n.jsx)(t,{component:zt,path:"/admin/users",exact:!0}),Object(n.jsx)(t,{component:Kt,path:"/admin/instituciones",exact:!0})]})})},ua=a(82),da=a(506),ja=Object(ua.c)({usuario:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(o.a)(Object(o.a)({},e),{},{activo:!0,usuario:t.payload.usuario,role:t.payload.role,token:t.payload.token});case P:return Object(o.a)(Object(o.a)({},D),{},{role:""});default:return e}}}),ba=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ua.d;var ma=function(){var e=Object(ua.e)(ja,ba(Object(ua.a)(da.a)));return function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.getItem("usuario")&&(a=JSON.parse(localStorage.getItem("usuario")),n=Object(T.a)(a.token),t({type:F,payload:{token:a.token,usuario:n,role:n.data.role}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(e.dispatch),e}();if(localStorage.getItem("usuario")){var pa=JSON.parse(localStorage.getItem("usuario"));E.a.defaults.headers.common.token=pa.token}E.a.defaults.baseURL="https://sigeftickets.herokuapp.com/",s.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(S.a,{store:ma,children:Object(n.jsx)(la,{})})}),document.getElementById("root"))}},[[734,1,2]]]);
//# sourceMappingURL=main.905197cd.chunk.js.map